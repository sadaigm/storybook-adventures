{"version":3,"file":"rc-field-form-62ec9191.js","sources":["../../node_modules/rc-field-form/es/FieldContext.js","../../node_modules/rc-field-form/es/ListContext.js","../../node_modules/rc-field-form/es/utils/typeUtil.js","../../node_modules/rc-field-form/es/utils/messages.js","../../node_modules/rc-field-form/es/utils/validateUtil.js","../../node_modules/rc-field-form/es/utils/valueUtil.js","../../node_modules/rc-field-form/es/Field.js","../../node_modules/rc-field-form/es/List.js","../../node_modules/rc-field-form/es/utils/asyncUtil.js","../../node_modules/rc-field-form/es/utils/NameMap.js","../../node_modules/rc-field-form/es/useForm.js","../../node_modules/rc-field-form/es/FormContext.js","../../node_modules/rc-field-form/es/Form.js","../../node_modules/rc-field-form/es/useWatch.js","../../node_modules/rc-field-form/es/index.js"],"sourcesContent":["import warning from \"rc-util/es/warning\";\nimport * as React from 'react';\nexport var HOOK_MARK = 'RC_FORM_INTERNAL_HOOKS';\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nvar warningFunc = function warningFunc() {\n  warning(false, 'Can not find FormContext. Please make sure you wrap Field under Form.');\n};\nvar Context = /*#__PURE__*/React.createContext({\n  getFieldValue: warningFunc,\n  getFieldsValue: warningFunc,\n  getFieldError: warningFunc,\n  getFieldWarning: warningFunc,\n  getFieldsError: warningFunc,\n  isFieldsTouched: warningFunc,\n  isFieldTouched: warningFunc,\n  isFieldValidating: warningFunc,\n  isFieldsValidating: warningFunc,\n  resetFields: warningFunc,\n  setFields: warningFunc,\n  setFieldValue: warningFunc,\n  setFieldsValue: warningFunc,\n  validateFields: warningFunc,\n  submit: warningFunc,\n  getInternalHooks: function getInternalHooks() {\n    warningFunc();\n    return {\n      dispatch: warningFunc,\n      initEntityValue: warningFunc,\n      registerField: warningFunc,\n      useSubscribe: warningFunc,\n      setInitialValues: warningFunc,\n      destroyForm: warningFunc,\n      setCallbacks: warningFunc,\n      registerWatch: warningFunc,\n      getFields: warningFunc,\n      setValidateMessages: warningFunc,\n      setPreserve: warningFunc,\n      getInitialValue: warningFunc\n    };\n  }\n});\nexport default Context;","import * as React from 'react';\nvar ListContext = /*#__PURE__*/React.createContext(null);\nexport default ListContext;","export function toArray(value) {\n  if (value === undefined || value === null) {\n    return [];\n  }\n  return Array.isArray(value) ? value : [value];\n}\nexport function isFormInstance(form) {\n  return form && !!form._init;\n}","var typeTemplate = \"'${name}' is not a valid ${type}\";\nexport var defaultValidateMessages = {\n  default: \"Validation error on field '${name}'\",\n  required: \"'${name}' is required\",\n  enum: \"'${name}' must be one of [${enum}]\",\n  whitespace: \"'${name}' cannot be empty\",\n  date: {\n    format: \"'${name}' is invalid for format date\",\n    parse: \"'${name}' could not be parsed as date\",\n    invalid: \"'${name}' is invalid date\"\n  },\n  types: {\n    string: typeTemplate,\n    method: typeTemplate,\n    array: typeTemplate,\n    object: typeTemplate,\n    number: typeTemplate,\n    date: typeTemplate,\n    boolean: typeTemplate,\n    integer: typeTemplate,\n    float: typeTemplate,\n    regexp: typeTemplate,\n    email: typeTemplate,\n    url: typeTemplate,\n    hex: typeTemplate\n  },\n  string: {\n    len: \"'${name}' must be exactly ${len} characters\",\n    min: \"'${name}' must be at least ${min} characters\",\n    max: \"'${name}' cannot be longer than ${max} characters\",\n    range: \"'${name}' must be between ${min} and ${max} characters\"\n  },\n  number: {\n    len: \"'${name}' must equal ${len}\",\n    min: \"'${name}' cannot be less than ${min}\",\n    max: \"'${name}' cannot be greater than ${max}\",\n    range: \"'${name}' must be between ${min} and ${max}\"\n  },\n  array: {\n    len: \"'${name}' must be exactly ${len} in length\",\n    min: \"'${name}' cannot be less than ${min} in length\",\n    max: \"'${name}' cannot be greater than ${max} in length\",\n    range: \"'${name}' must be between ${min} and ${max} in length\"\n  },\n  pattern: {\n    mismatch: \"'${name}' does not match pattern ${pattern}\"\n  }\n};","import _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _regeneratorRuntime from \"@babel/runtime/helpers/esm/regeneratorRuntime\";\nimport _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport RawAsyncValidator from '@rc-component/async-validator';\nimport * as React from 'react';\nimport warning from \"rc-util/es/warning\";\nimport { defaultValidateMessages } from \"./messages\";\nimport { merge } from \"rc-util/es/utils/set\";\n\n// Remove incorrect original ts define\nvar AsyncValidator = RawAsyncValidator;\n\n/**\n * Replace with template.\n *   `I'm ${name}` + { name: 'bamboo' } = I'm bamboo\n */\nfunction replaceMessage(template, kv) {\n  return template.replace(/\\\\?\\$\\{\\w+\\}/g, function (str) {\n    if (str.startsWith('\\\\')) {\n      return str.slice(1);\n    }\n    var key = str.slice(2, -1);\n    return kv[key];\n  });\n}\nvar CODE_LOGIC_ERROR = 'CODE_LOGIC_ERROR';\nfunction validateRule(_x, _x2, _x3, _x4, _x5) {\n  return _validateRule.apply(this, arguments);\n}\n/**\n * We use `async-validator` to validate the value.\n * But only check one value in a time to avoid namePath validate issue.\n */\nfunction _validateRule() {\n  _validateRule = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2(name, value, rule, options, messageVariables) {\n    var cloneRule, originValidator, subRuleField, validator, messages, result, subResults, kv, fillVariableResult;\n    return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n      while (1) switch (_context2.prev = _context2.next) {\n        case 0:\n          cloneRule = _objectSpread({}, rule); // Bug of `async-validator`\n          // https://github.com/react-component/field-form/issues/316\n          // https://github.com/react-component/field-form/issues/313\n          delete cloneRule.ruleIndex;\n\n          // https://github.com/ant-design/ant-design/issues/40497#issuecomment-1422282378\n          AsyncValidator.warning = function () {\n            return void 0;\n          };\n          if (cloneRule.validator) {\n            originValidator = cloneRule.validator;\n            cloneRule.validator = function () {\n              try {\n                return originValidator.apply(void 0, arguments);\n              } catch (error) {\n                console.error(error);\n                return Promise.reject(CODE_LOGIC_ERROR);\n              }\n            };\n          }\n\n          // We should special handle array validate\n          subRuleField = null;\n          if (cloneRule && cloneRule.type === 'array' && cloneRule.defaultField) {\n            subRuleField = cloneRule.defaultField;\n            delete cloneRule.defaultField;\n          }\n          validator = new AsyncValidator(_defineProperty({}, name, [cloneRule]));\n          messages = merge(defaultValidateMessages, options.validateMessages);\n          validator.messages(messages);\n          result = [];\n          _context2.prev = 10;\n          _context2.next = 13;\n          return Promise.resolve(validator.validate(_defineProperty({}, name, value), _objectSpread({}, options)));\n        case 13:\n          _context2.next = 18;\n          break;\n        case 15:\n          _context2.prev = 15;\n          _context2.t0 = _context2[\"catch\"](10);\n          if (_context2.t0.errors) {\n            result = _context2.t0.errors.map(function (_ref4, index) {\n              var message = _ref4.message;\n              var mergedMessage = message === CODE_LOGIC_ERROR ? messages.default : message;\n              return /*#__PURE__*/React.isValidElement(mergedMessage) ?\n              /*#__PURE__*/\n              // Wrap ReactNode with `key`\n              React.cloneElement(mergedMessage, {\n                key: \"error_\".concat(index)\n              }) : mergedMessage;\n            });\n          }\n        case 18:\n          if (!(!result.length && subRuleField)) {\n            _context2.next = 23;\n            break;\n          }\n          _context2.next = 21;\n          return Promise.all(value.map(function (subValue, i) {\n            return validateRule(\"\".concat(name, \".\").concat(i), subValue, subRuleField, options, messageVariables);\n          }));\n        case 21:\n          subResults = _context2.sent;\n          return _context2.abrupt(\"return\", subResults.reduce(function (prev, errors) {\n            return [].concat(_toConsumableArray(prev), _toConsumableArray(errors));\n          }, []));\n        case 23:\n          // Replace message with variables\n          kv = _objectSpread(_objectSpread({}, rule), {}, {\n            name: name,\n            enum: (rule.enum || []).join(', ')\n          }, messageVariables);\n          fillVariableResult = result.map(function (error) {\n            if (typeof error === 'string') {\n              return replaceMessage(error, kv);\n            }\n            return error;\n          });\n          return _context2.abrupt(\"return\", fillVariableResult);\n        case 26:\n        case \"end\":\n          return _context2.stop();\n      }\n    }, _callee2, null, [[10, 15]]);\n  }));\n  return _validateRule.apply(this, arguments);\n}\nexport function validateRules(namePath, value, rules, options, validateFirst, messageVariables) {\n  var name = namePath.join('.');\n\n  // Fill rule with context\n  var filledRules = rules.map(function (currentRule, ruleIndex) {\n    var originValidatorFunc = currentRule.validator;\n    var cloneRule = _objectSpread(_objectSpread({}, currentRule), {}, {\n      ruleIndex: ruleIndex\n    });\n\n    // Replace validator if needed\n    if (originValidatorFunc) {\n      cloneRule.validator = function (rule, val, callback) {\n        var hasPromise = false;\n\n        // Wrap callback only accept when promise not provided\n        var wrappedCallback = function wrappedCallback() {\n          for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n            args[_key] = arguments[_key];\n          }\n          // Wait a tick to make sure return type is a promise\n          Promise.resolve().then(function () {\n            warning(!hasPromise, 'Your validator function has already return a promise. `callback` will be ignored.');\n            if (!hasPromise) {\n              callback.apply(void 0, args);\n            }\n          });\n        };\n\n        // Get promise\n        var promise = originValidatorFunc(rule, val, wrappedCallback);\n        hasPromise = promise && typeof promise.then === 'function' && typeof promise.catch === 'function';\n\n        /**\n         * 1. Use promise as the first priority.\n         * 2. If promise not exist, use callback with warning instead\n         */\n        warning(hasPromise, '`callback` is deprecated. Please return a promise instead.');\n        if (hasPromise) {\n          promise.then(function () {\n            callback();\n          }).catch(function (err) {\n            callback(err || ' ');\n          });\n        }\n      };\n    }\n    return cloneRule;\n  }).sort(function (_ref, _ref2) {\n    var w1 = _ref.warningOnly,\n      i1 = _ref.ruleIndex;\n    var w2 = _ref2.warningOnly,\n      i2 = _ref2.ruleIndex;\n    if (!!w1 === !!w2) {\n      // Let keep origin order\n      return i1 - i2;\n    }\n    if (w1) {\n      return 1;\n    }\n    return -1;\n  });\n\n  // Do validate rules\n  var summaryPromise;\n  if (validateFirst === true) {\n    // >>>>> Validate by serialization\n    summaryPromise = new Promise( /*#__PURE__*/function () {\n      var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(resolve, reject) {\n        var i, rule, errors;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              i = 0;\n            case 1:\n              if (!(i < filledRules.length)) {\n                _context.next = 12;\n                break;\n              }\n              rule = filledRules[i];\n              _context.next = 5;\n              return validateRule(name, value, rule, options, messageVariables);\n            case 5:\n              errors = _context.sent;\n              if (!errors.length) {\n                _context.next = 9;\n                break;\n              }\n              reject([{\n                errors: errors,\n                rule: rule\n              }]);\n              return _context.abrupt(\"return\");\n            case 9:\n              i += 1;\n              _context.next = 1;\n              break;\n            case 12:\n              /* eslint-enable */\n\n              resolve([]);\n            case 13:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee);\n      }));\n      return function (_x6, _x7) {\n        return _ref3.apply(this, arguments);\n      };\n    }());\n  } else {\n    // >>>>> Validate by parallel\n    var rulePromises = filledRules.map(function (rule) {\n      return validateRule(name, value, rule, options, messageVariables).then(function (errors) {\n        return {\n          errors: errors,\n          rule: rule\n        };\n      });\n    });\n    summaryPromise = (validateFirst ? finishOnFirstFailed(rulePromises) : finishOnAllFailed(rulePromises)).then(function (errors) {\n      // Always change to rejection for Field to catch\n      return Promise.reject(errors);\n    });\n  }\n\n  // Internal catch error to avoid console error log.\n  summaryPromise.catch(function (e) {\n    return e;\n  });\n  return summaryPromise;\n}\nfunction finishOnAllFailed(_x8) {\n  return _finishOnAllFailed.apply(this, arguments);\n}\nfunction _finishOnAllFailed() {\n  _finishOnAllFailed = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee3(rulePromises) {\n    return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n      while (1) switch (_context3.prev = _context3.next) {\n        case 0:\n          return _context3.abrupt(\"return\", Promise.all(rulePromises).then(function (errorsList) {\n            var _ref5;\n            var errors = (_ref5 = []).concat.apply(_ref5, _toConsumableArray(errorsList));\n            return errors;\n          }));\n        case 1:\n        case \"end\":\n          return _context3.stop();\n      }\n    }, _callee3);\n  }));\n  return _finishOnAllFailed.apply(this, arguments);\n}\nfunction finishOnFirstFailed(_x9) {\n  return _finishOnFirstFailed.apply(this, arguments);\n}\nfunction _finishOnFirstFailed() {\n  _finishOnFirstFailed = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee4(rulePromises) {\n    var count;\n    return _regeneratorRuntime().wrap(function _callee4$(_context4) {\n      while (1) switch (_context4.prev = _context4.next) {\n        case 0:\n          count = 0;\n          return _context4.abrupt(\"return\", new Promise(function (resolve) {\n            rulePromises.forEach(function (promise) {\n              promise.then(function (ruleError) {\n                if (ruleError.errors.length) {\n                  resolve([ruleError]);\n                }\n                count += 1;\n                if (count === rulePromises.length) {\n                  resolve([]);\n                }\n              });\n            });\n          }));\n        case 2:\n        case \"end\":\n          return _context4.stop();\n      }\n    }, _callee4);\n  }));\n  return _finishOnFirstFailed.apply(this, arguments);\n}","import _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport _typeof from \"@babel/runtime/helpers/esm/typeof\";\nimport getValue from \"rc-util/es/utils/get\";\nimport setValue from \"rc-util/es/utils/set\";\nimport { toArray } from \"./typeUtil\";\nexport { getValue, setValue };\n\n/**\n * Convert name to internal supported format.\n * This function should keep since we still thinking if need support like `a.b.c` format.\n * 'a' => ['a']\n * 123 => [123]\n * ['a', 123] => ['a', 123]\n */\nexport function getNamePath(path) {\n  return toArray(path);\n}\nexport function cloneByNamePathList(store, namePathList) {\n  var newStore = {};\n  namePathList.forEach(function (namePath) {\n    var value = getValue(store, namePath);\n    newStore = setValue(newStore, namePath, value);\n  });\n  return newStore;\n}\n\n/**\n * Check if `namePathList` includes `namePath`.\n * @param namePathList A list of `InternalNamePath[]`\n * @param namePath Compare `InternalNamePath`\n * @param partialMatch True will make `[a, b]` match `[a, b, c]`\n */\nexport function containsNamePath(namePathList, namePath) {\n  var partialMatch = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n  return namePathList && namePathList.some(function (path) {\n    return matchNamePath(namePath, path, partialMatch);\n  });\n}\n\n/**\n * Check if `namePath` is super set or equal of `subNamePath`.\n * @param namePath A list of `InternalNamePath[]`\n * @param subNamePath Compare `InternalNamePath`\n * @param partialMatch True will make `[a, b]` match `[a, b, c]`\n */\nexport function matchNamePath(namePath, subNamePath) {\n  var partialMatch = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n  if (!namePath || !subNamePath) {\n    return false;\n  }\n  if (!partialMatch && namePath.length !== subNamePath.length) {\n    return false;\n  }\n  return subNamePath.every(function (nameUnit, i) {\n    return namePath[i] === nameUnit;\n  });\n}\n\n// Like `shallowEqual`, but we not check the data which may cause re-render\n\nexport function isSimilar(source, target) {\n  if (source === target) {\n    return true;\n  }\n  if (!source && target || source && !target) {\n    return false;\n  }\n  if (!source || !target || _typeof(source) !== 'object' || _typeof(target) !== 'object') {\n    return false;\n  }\n  var sourceKeys = Object.keys(source);\n  var targetKeys = Object.keys(target);\n  var keys = new Set([].concat(sourceKeys, targetKeys));\n  return _toConsumableArray(keys).every(function (key) {\n    var sourceValue = source[key];\n    var targetValue = target[key];\n    if (typeof sourceValue === 'function' && typeof targetValue === 'function') {\n      return true;\n    }\n    return sourceValue === targetValue;\n  });\n}\nexport function defaultGetValueFromEvent(valuePropName) {\n  var event = arguments.length <= 1 ? undefined : arguments[1];\n  if (event && event.target && _typeof(event.target) === 'object' && valuePropName in event.target) {\n    return event.target[valuePropName];\n  }\n  return event;\n}\n\n/**\n * Moves an array item from one position in an array to another.\n *\n * Note: This is a pure function so a new array will be returned, instead\n * of altering the array argument.\n *\n * @param array         Array in which to move an item.         (required)\n * @param moveIndex     The index of the item to move.          (required)\n * @param toIndex       The index to move item at moveIndex to. (required)\n */\nexport function move(array, moveIndex, toIndex) {\n  var length = array.length;\n  if (moveIndex < 0 || moveIndex >= length || toIndex < 0 || toIndex >= length) {\n    return array;\n  }\n  var item = array[moveIndex];\n  var diff = moveIndex - toIndex;\n  if (diff > 0) {\n    // move left\n    return [].concat(_toConsumableArray(array.slice(0, toIndex)), [item], _toConsumableArray(array.slice(toIndex, moveIndex)), _toConsumableArray(array.slice(moveIndex + 1, length)));\n  }\n  if (diff < 0) {\n    // move right\n    return [].concat(_toConsumableArray(array.slice(0, moveIndex)), _toConsumableArray(array.slice(moveIndex + 1, toIndex + 1)), [item], _toConsumableArray(array.slice(toIndex + 1, length)));\n  }\n  return array;\n}","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport _regeneratorRuntime from \"@babel/runtime/helpers/esm/regeneratorRuntime\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"@babel/runtime/helpers/esm/createSuper\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nvar _excluded = [\"name\"];\nimport toChildrenArray from \"rc-util/es/Children/toArray\";\nimport isEqual from \"rc-util/es/isEqual\";\nimport warning from \"rc-util/es/warning\";\nimport * as React from 'react';\nimport FieldContext, { HOOK_MARK } from \"./FieldContext\";\nimport ListContext from \"./ListContext\";\nimport { toArray } from \"./utils/typeUtil\";\nimport { validateRules } from \"./utils/validateUtil\";\nimport { containsNamePath, defaultGetValueFromEvent, getNamePath, getValue } from \"./utils/valueUtil\";\nvar EMPTY_ERRORS = [];\nfunction requireUpdate(shouldUpdate, prev, next, prevValue, nextValue, info) {\n  if (typeof shouldUpdate === 'function') {\n    return shouldUpdate(prev, next, 'source' in info ? {\n      source: info.source\n    } : {});\n  }\n  return prevValue !== nextValue;\n}\n\n// eslint-disable-next-line @typescript-eslint/consistent-indexed-object-style\n// We use Class instead of Hooks here since it will cost much code by using Hooks.\nvar Field = /*#__PURE__*/function (_React$Component) {\n  _inherits(Field, _React$Component);\n  var _super = _createSuper(Field);\n  // ============================== Subscriptions ==============================\n  function Field(props) {\n    var _this;\n    _classCallCheck(this, Field);\n    _this = _super.call(this, props);\n\n    // Register on init\n    _defineProperty(_assertThisInitialized(_this), \"state\", {\n      resetCount: 0\n    });\n    _defineProperty(_assertThisInitialized(_this), \"cancelRegisterFunc\", null);\n    _defineProperty(_assertThisInitialized(_this), \"mounted\", false);\n    /**\n     * Follow state should not management in State since it will async update by React.\n     * This makes first render of form can not get correct state value.\n     */\n    _defineProperty(_assertThisInitialized(_this), \"touched\", false);\n    /**\n     * Mark when touched & validated. Currently only used for `dependencies`.\n     * Note that we do not think field with `initialValue` is dirty\n     * but this will be by `isFieldDirty` func.\n     */\n    _defineProperty(_assertThisInitialized(_this), \"dirty\", false);\n    _defineProperty(_assertThisInitialized(_this), \"validatePromise\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"prevValidating\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"errors\", EMPTY_ERRORS);\n    _defineProperty(_assertThisInitialized(_this), \"warnings\", EMPTY_ERRORS);\n    _defineProperty(_assertThisInitialized(_this), \"cancelRegister\", function () {\n      var _this$props = _this.props,\n        preserve = _this$props.preserve,\n        isListField = _this$props.isListField,\n        name = _this$props.name;\n      if (_this.cancelRegisterFunc) {\n        _this.cancelRegisterFunc(isListField, preserve, getNamePath(name));\n      }\n      _this.cancelRegisterFunc = null;\n    });\n    // ================================== Utils ==================================\n    _defineProperty(_assertThisInitialized(_this), \"getNamePath\", function () {\n      var _this$props2 = _this.props,\n        name = _this$props2.name,\n        fieldContext = _this$props2.fieldContext;\n      var _fieldContext$prefixN = fieldContext.prefixName,\n        prefixName = _fieldContext$prefixN === void 0 ? [] : _fieldContext$prefixN;\n      return name !== undefined ? [].concat(_toConsumableArray(prefixName), _toConsumableArray(name)) : [];\n    });\n    _defineProperty(_assertThisInitialized(_this), \"getRules\", function () {\n      var _this$props3 = _this.props,\n        _this$props3$rules = _this$props3.rules,\n        rules = _this$props3$rules === void 0 ? [] : _this$props3$rules,\n        fieldContext = _this$props3.fieldContext;\n      return rules.map(function (rule) {\n        if (typeof rule === 'function') {\n          return rule(fieldContext);\n        }\n        return rule;\n      });\n    });\n    _defineProperty(_assertThisInitialized(_this), \"refresh\", function () {\n      if (!_this.mounted) return;\n\n      /**\n       * Clean up current node.\n       */\n      _this.setState(function (_ref) {\n        var resetCount = _ref.resetCount;\n        return {\n          resetCount: resetCount + 1\n        };\n      });\n    });\n    // Event should only trigger when meta changed\n    _defineProperty(_assertThisInitialized(_this), \"metaCache\", null);\n    _defineProperty(_assertThisInitialized(_this), \"triggerMetaEvent\", function (destroy) {\n      var onMetaChange = _this.props.onMetaChange;\n      if (onMetaChange) {\n        var _meta = _objectSpread(_objectSpread({}, _this.getMeta()), {}, {\n          destroy: destroy\n        });\n        if (!isEqual(_this.metaCache, _meta)) {\n          onMetaChange(_meta);\n        }\n        _this.metaCache = _meta;\n      } else {\n        _this.metaCache = null;\n      }\n    });\n    // ========================= Field Entity Interfaces =========================\n    // Trigger by store update. Check if need update the component\n    _defineProperty(_assertThisInitialized(_this), \"onStoreChange\", function (prevStore, namePathList, info) {\n      var _this$props4 = _this.props,\n        shouldUpdate = _this$props4.shouldUpdate,\n        _this$props4$dependen = _this$props4.dependencies,\n        dependencies = _this$props4$dependen === void 0 ? [] : _this$props4$dependen,\n        onReset = _this$props4.onReset;\n      var store = info.store;\n      var namePath = _this.getNamePath();\n      var prevValue = _this.getValue(prevStore);\n      var curValue = _this.getValue(store);\n      var namePathMatch = namePathList && containsNamePath(namePathList, namePath);\n\n      // `setFieldsValue` is a quick access to update related status\n      if (info.type === 'valueUpdate' && info.source === 'external' && !isEqual(prevValue, curValue)) {\n        _this.touched = true;\n        _this.dirty = true;\n        _this.validatePromise = null;\n        _this.errors = EMPTY_ERRORS;\n        _this.warnings = EMPTY_ERRORS;\n        _this.triggerMetaEvent();\n      }\n      switch (info.type) {\n        case 'reset':\n          if (!namePathList || namePathMatch) {\n            // Clean up state\n            _this.touched = false;\n            _this.dirty = false;\n            _this.validatePromise = undefined;\n            _this.errors = EMPTY_ERRORS;\n            _this.warnings = EMPTY_ERRORS;\n            _this.triggerMetaEvent();\n            onReset === null || onReset === void 0 || onReset();\n            _this.refresh();\n            return;\n          }\n          break;\n\n        /**\n         * In case field with `preserve = false` nest deps like:\n         * - A = 1 => show B\n         * - B = 1 => show C\n         * - Reset A, need clean B, C\n         */\n        case 'remove':\n          {\n            if (shouldUpdate && requireUpdate(shouldUpdate, prevStore, store, prevValue, curValue, info)) {\n              _this.reRender();\n              return;\n            }\n            break;\n          }\n        case 'setField':\n          {\n            var data = info.data;\n            if (namePathMatch) {\n              if ('touched' in data) {\n                _this.touched = data.touched;\n              }\n              if ('validating' in data && !('originRCField' in data)) {\n                _this.validatePromise = data.validating ? Promise.resolve([]) : null;\n              }\n              if ('errors' in data) {\n                _this.errors = data.errors || EMPTY_ERRORS;\n              }\n              if ('warnings' in data) {\n                _this.warnings = data.warnings || EMPTY_ERRORS;\n              }\n              _this.dirty = true;\n              _this.triggerMetaEvent();\n              _this.reRender();\n              return;\n            } else if ('value' in data && containsNamePath(namePathList, namePath, true)) {\n              // Contains path with value should also check\n              _this.reRender();\n              return;\n            }\n\n            // Handle update by `setField` with `shouldUpdate`\n            if (shouldUpdate && !namePath.length && requireUpdate(shouldUpdate, prevStore, store, prevValue, curValue, info)) {\n              _this.reRender();\n              return;\n            }\n            break;\n          }\n        case 'dependenciesUpdate':\n          {\n            /**\n             * Trigger when marked `dependencies` updated. Related fields will all update\n             */\n            var dependencyList = dependencies.map(getNamePath);\n            // No need for `namePathMath` check and `shouldUpdate` check, since `valueUpdate` will be\n            // emitted earlier and they will work there\n            // If set it may cause unnecessary twice rerendering\n            if (dependencyList.some(function (dependency) {\n              return containsNamePath(info.relatedFields, dependency);\n            })) {\n              _this.reRender();\n              return;\n            }\n            break;\n          }\n        default:\n          // 1. If `namePath` exists in `namePathList`, means it's related value and should update\n          //      For example <List name=\"list\"><Field name={['list', 0]}></List>\n          //      If `namePathList` is [['list']] (List value update), Field should be updated\n          //      If `namePathList` is [['list', 0]] (Field value update), List shouldn't be updated\n          // 2.\n          //   2.1 If `dependencies` is set, `name` is not set and `shouldUpdate` is not set,\n          //       don't use `shouldUpdate`. `dependencies` is view as a shortcut if `shouldUpdate`\n          //       is not provided\n          //   2.2 If `shouldUpdate` provided, use customize logic to update the field\n          //       else to check if value changed\n          if (namePathMatch || (!dependencies.length || namePath.length || shouldUpdate) && requireUpdate(shouldUpdate, prevStore, store, prevValue, curValue, info)) {\n            _this.reRender();\n            return;\n          }\n          break;\n      }\n      if (shouldUpdate === true) {\n        _this.reRender();\n      }\n    });\n    _defineProperty(_assertThisInitialized(_this), \"validateRules\", function (options) {\n      // We should fixed namePath & value to avoid developer change then by form function\n      var namePath = _this.getNamePath();\n      var currentValue = _this.getValue();\n      var _ref2 = options || {},\n        triggerName = _ref2.triggerName,\n        _ref2$validateOnly = _ref2.validateOnly,\n        validateOnly = _ref2$validateOnly === void 0 ? false : _ref2$validateOnly;\n\n      // Force change to async to avoid rule OOD under renderProps field\n      var rootPromise = Promise.resolve().then( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n        var _this$props5, _this$props5$validate, validateFirst, messageVariables, validateDebounce, filteredRules, promise;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              if (_this.mounted) {\n                _context.next = 2;\n                break;\n              }\n              return _context.abrupt(\"return\", []);\n            case 2:\n              _this$props5 = _this.props, _this$props5$validate = _this$props5.validateFirst, validateFirst = _this$props5$validate === void 0 ? false : _this$props5$validate, messageVariables = _this$props5.messageVariables, validateDebounce = _this$props5.validateDebounce; // Start validate\n              filteredRules = _this.getRules();\n              if (triggerName) {\n                filteredRules = filteredRules.filter(function (rule) {\n                  return rule;\n                }).filter(function (rule) {\n                  var validateTrigger = rule.validateTrigger;\n                  if (!validateTrigger) {\n                    return true;\n                  }\n                  var triggerList = toArray(validateTrigger);\n                  return triggerList.includes(triggerName);\n                });\n              }\n\n              // Wait for debounce. Skip if no `triggerName` since its from `validateFields / submit`\n              if (!(validateDebounce && triggerName)) {\n                _context.next = 10;\n                break;\n              }\n              _context.next = 8;\n              return new Promise(function (resolve) {\n                setTimeout(resolve, validateDebounce);\n              });\n            case 8:\n              if (!(_this.validatePromise !== rootPromise)) {\n                _context.next = 10;\n                break;\n              }\n              return _context.abrupt(\"return\", []);\n            case 10:\n              promise = validateRules(namePath, currentValue, filteredRules, options, validateFirst, messageVariables);\n              promise.catch(function (e) {\n                return e;\n              }).then(function () {\n                var ruleErrors = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : EMPTY_ERRORS;\n                if (_this.validatePromise === rootPromise) {\n                  var _ruleErrors$forEach;\n                  _this.validatePromise = null;\n\n                  // Get errors & warnings\n                  var nextErrors = [];\n                  var nextWarnings = [];\n                  (_ruleErrors$forEach = ruleErrors.forEach) === null || _ruleErrors$forEach === void 0 || _ruleErrors$forEach.call(ruleErrors, function (_ref4) {\n                    var warningOnly = _ref4.rule.warningOnly,\n                      _ref4$errors = _ref4.errors,\n                      errors = _ref4$errors === void 0 ? EMPTY_ERRORS : _ref4$errors;\n                    if (warningOnly) {\n                      nextWarnings.push.apply(nextWarnings, _toConsumableArray(errors));\n                    } else {\n                      nextErrors.push.apply(nextErrors, _toConsumableArray(errors));\n                    }\n                  });\n                  _this.errors = nextErrors;\n                  _this.warnings = nextWarnings;\n                  _this.triggerMetaEvent();\n                  _this.reRender();\n                }\n              });\n              return _context.abrupt(\"return\", promise);\n            case 13:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee);\n      })));\n      if (validateOnly) {\n        return rootPromise;\n      }\n      _this.validatePromise = rootPromise;\n      _this.dirty = true;\n      _this.errors = EMPTY_ERRORS;\n      _this.warnings = EMPTY_ERRORS;\n      _this.triggerMetaEvent();\n\n      // Force trigger re-render since we need sync renderProps with new meta\n      _this.reRender();\n      return rootPromise;\n    });\n    _defineProperty(_assertThisInitialized(_this), \"isFieldValidating\", function () {\n      return !!_this.validatePromise;\n    });\n    _defineProperty(_assertThisInitialized(_this), \"isFieldTouched\", function () {\n      return _this.touched;\n    });\n    _defineProperty(_assertThisInitialized(_this), \"isFieldDirty\", function () {\n      // Touched or validate or has initialValue\n      if (_this.dirty || _this.props.initialValue !== undefined) {\n        return true;\n      }\n\n      // Form set initialValue\n      var fieldContext = _this.props.fieldContext;\n      var _fieldContext$getInte = fieldContext.getInternalHooks(HOOK_MARK),\n        getInitialValue = _fieldContext$getInte.getInitialValue;\n      if (getInitialValue(_this.getNamePath()) !== undefined) {\n        return true;\n      }\n      return false;\n    });\n    _defineProperty(_assertThisInitialized(_this), \"getErrors\", function () {\n      return _this.errors;\n    });\n    _defineProperty(_assertThisInitialized(_this), \"getWarnings\", function () {\n      return _this.warnings;\n    });\n    _defineProperty(_assertThisInitialized(_this), \"isListField\", function () {\n      return _this.props.isListField;\n    });\n    _defineProperty(_assertThisInitialized(_this), \"isList\", function () {\n      return _this.props.isList;\n    });\n    _defineProperty(_assertThisInitialized(_this), \"isPreserve\", function () {\n      return _this.props.preserve;\n    });\n    // ============================= Child Component =============================\n    _defineProperty(_assertThisInitialized(_this), \"getMeta\", function () {\n      // Make error & validating in cache to save perf\n      _this.prevValidating = _this.isFieldValidating();\n      var meta = {\n        touched: _this.isFieldTouched(),\n        validating: _this.prevValidating,\n        errors: _this.errors,\n        warnings: _this.warnings,\n        name: _this.getNamePath(),\n        validated: _this.validatePromise === null\n      };\n      return meta;\n    });\n    // Only return validate child node. If invalidate, will do nothing about field.\n    _defineProperty(_assertThisInitialized(_this), \"getOnlyChild\", function (children) {\n      // Support render props\n      if (typeof children === 'function') {\n        var _meta2 = _this.getMeta();\n        return _objectSpread(_objectSpread({}, _this.getOnlyChild(children(_this.getControlled(), _meta2, _this.props.fieldContext))), {}, {\n          isFunction: true\n        });\n      }\n\n      // Filed element only\n      var childList = toChildrenArray(children);\n      if (childList.length !== 1 || ! /*#__PURE__*/React.isValidElement(childList[0])) {\n        return {\n          child: childList,\n          isFunction: false\n        };\n      }\n      return {\n        child: childList[0],\n        isFunction: false\n      };\n    });\n    // ============================== Field Control ==============================\n    _defineProperty(_assertThisInitialized(_this), \"getValue\", function (store) {\n      var getFieldsValue = _this.props.fieldContext.getFieldsValue;\n      var namePath = _this.getNamePath();\n      return getValue(store || getFieldsValue(true), namePath);\n    });\n    _defineProperty(_assertThisInitialized(_this), \"getControlled\", function () {\n      var childProps = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var _this$props6 = _this.props,\n        name = _this$props6.name,\n        trigger = _this$props6.trigger,\n        validateTrigger = _this$props6.validateTrigger,\n        getValueFromEvent = _this$props6.getValueFromEvent,\n        normalize = _this$props6.normalize,\n        valuePropName = _this$props6.valuePropName,\n        getValueProps = _this$props6.getValueProps,\n        fieldContext = _this$props6.fieldContext;\n      var mergedValidateTrigger = validateTrigger !== undefined ? validateTrigger : fieldContext.validateTrigger;\n      var namePath = _this.getNamePath();\n      var getInternalHooks = fieldContext.getInternalHooks,\n        getFieldsValue = fieldContext.getFieldsValue;\n      var _getInternalHooks = getInternalHooks(HOOK_MARK),\n        dispatch = _getInternalHooks.dispatch;\n      var value = _this.getValue();\n      var mergedGetValueProps = getValueProps || function (val) {\n        return _defineProperty({}, valuePropName, val);\n      };\n      var originTriggerFunc = childProps[trigger];\n      var valueProps = name !== undefined ? mergedGetValueProps(value) : {};\n\n      // warning when prop value is function\n      if (process.env.NODE_ENV !== 'production' && valueProps) {\n        Object.keys(valueProps).forEach(function (key) {\n          warning(typeof valueProps[key] !== 'function', \"It's not recommended to generate dynamic function prop by `getValueProps`. Please pass it to child component directly (prop: \".concat(key, \")\"));\n        });\n      }\n      var control = _objectSpread(_objectSpread({}, childProps), valueProps);\n\n      // Add trigger\n      control[trigger] = function () {\n        // Mark as touched\n        _this.touched = true;\n        _this.dirty = true;\n        _this.triggerMetaEvent();\n        var newValue;\n        for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n          args[_key] = arguments[_key];\n        }\n        if (getValueFromEvent) {\n          newValue = getValueFromEvent.apply(void 0, args);\n        } else {\n          newValue = defaultGetValueFromEvent.apply(void 0, [valuePropName].concat(args));\n        }\n        if (normalize) {\n          newValue = normalize(newValue, value, getFieldsValue(true));\n        }\n        if (newValue !== value) {\n          dispatch({\n            type: 'updateValue',\n            namePath: namePath,\n            value: newValue\n          });\n        }\n        if (originTriggerFunc) {\n          originTriggerFunc.apply(void 0, args);\n        }\n      };\n\n      // Add validateTrigger\n      var validateTriggerList = toArray(mergedValidateTrigger || []);\n      validateTriggerList.forEach(function (triggerName) {\n        // Wrap additional function of component, so that we can get latest value from store\n        var originTrigger = control[triggerName];\n        control[triggerName] = function () {\n          if (originTrigger) {\n            originTrigger.apply(void 0, arguments);\n          }\n\n          // Always use latest rules\n          var rules = _this.props.rules;\n          if (rules && rules.length) {\n            // We dispatch validate to root,\n            // since it will update related data with other field with same name\n            dispatch({\n              type: 'validateField',\n              namePath: namePath,\n              triggerName: triggerName\n            });\n          }\n        };\n      });\n      return control;\n    });\n    if (props.fieldContext) {\n      var getInternalHooks = props.fieldContext.getInternalHooks;\n      var _getInternalHooks2 = getInternalHooks(HOOK_MARK),\n        initEntityValue = _getInternalHooks2.initEntityValue;\n      initEntityValue(_assertThisInitialized(_this));\n    }\n    return _this;\n  }\n  _createClass(Field, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this$props7 = this.props,\n        shouldUpdate = _this$props7.shouldUpdate,\n        fieldContext = _this$props7.fieldContext;\n      this.mounted = true;\n\n      // Register on init\n      if (fieldContext) {\n        var getInternalHooks = fieldContext.getInternalHooks;\n        var _getInternalHooks3 = getInternalHooks(HOOK_MARK),\n          registerField = _getInternalHooks3.registerField;\n        this.cancelRegisterFunc = registerField(this);\n      }\n\n      // One more render for component in case fields not ready\n      if (shouldUpdate === true) {\n        this.reRender();\n      }\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.cancelRegister();\n      this.triggerMetaEvent(true);\n      this.mounted = false;\n    }\n  }, {\n    key: \"reRender\",\n    value: function reRender() {\n      if (!this.mounted) return;\n      this.forceUpdate();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var resetCount = this.state.resetCount;\n      var children = this.props.children;\n      var _this$getOnlyChild = this.getOnlyChild(children),\n        child = _this$getOnlyChild.child,\n        isFunction = _this$getOnlyChild.isFunction;\n\n      // Not need to `cloneElement` since user can handle this in render function self\n      var returnChildNode;\n      if (isFunction) {\n        returnChildNode = child;\n      } else if ( /*#__PURE__*/React.isValidElement(child)) {\n        returnChildNode = /*#__PURE__*/React.cloneElement(child, this.getControlled(child.props));\n      } else {\n        warning(!child, '`children` of Field is not validate ReactElement.');\n        returnChildNode = child;\n      }\n      return /*#__PURE__*/React.createElement(React.Fragment, {\n        key: resetCount\n      }, returnChildNode);\n    }\n  }]);\n  return Field;\n}(React.Component);\n_defineProperty(Field, \"contextType\", FieldContext);\n_defineProperty(Field, \"defaultProps\", {\n  trigger: 'onChange',\n  valuePropName: 'value'\n});\nfunction WrapperField(_ref6) {\n  var _restProps$isListFiel;\n  var name = _ref6.name,\n    restProps = _objectWithoutProperties(_ref6, _excluded);\n  var fieldContext = React.useContext(FieldContext);\n  var listContext = React.useContext(ListContext);\n  var namePath = name !== undefined ? getNamePath(name) : undefined;\n  var isMergedListField = (_restProps$isListFiel = restProps.isListField) !== null && _restProps$isListFiel !== void 0 ? _restProps$isListFiel : !!listContext;\n  var key = 'keep';\n  if (!isMergedListField) {\n    key = \"_\".concat((namePath || []).join('_'));\n  }\n\n  // Warning if it's a directly list field.\n  // We can still support multiple level field preserve.\n  if (process.env.NODE_ENV !== 'production' && restProps.preserve === false && isMergedListField && namePath.length <= 1) {\n    warning(false, '`preserve` should not apply on Form.List fields.');\n  }\n  return /*#__PURE__*/React.createElement(Field, _extends({\n    key: key,\n    name: namePath,\n    isListField: isMergedListField\n  }, restProps, {\n    fieldContext: fieldContext\n  }));\n}\nexport default WrapperField;","import _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport * as React from 'react';\nimport warning from \"rc-util/es/warning\";\nimport FieldContext from \"./FieldContext\";\nimport Field from \"./Field\";\nimport { move as _move, getNamePath } from \"./utils/valueUtil\";\nimport ListContext from \"./ListContext\";\nfunction List(_ref) {\n  var name = _ref.name,\n    initialValue = _ref.initialValue,\n    children = _ref.children,\n    rules = _ref.rules,\n    validateTrigger = _ref.validateTrigger,\n    isListField = _ref.isListField;\n  var context = React.useContext(FieldContext);\n  var wrapperListContext = React.useContext(ListContext);\n  var keyRef = React.useRef({\n    keys: [],\n    id: 0\n  });\n  var keyManager = keyRef.current;\n  var prefixName = React.useMemo(function () {\n    var parentPrefixName = getNamePath(context.prefixName) || [];\n    return [].concat(_toConsumableArray(parentPrefixName), _toConsumableArray(getNamePath(name)));\n  }, [context.prefixName, name]);\n  var fieldContext = React.useMemo(function () {\n    return _objectSpread(_objectSpread({}, context), {}, {\n      prefixName: prefixName\n    });\n  }, [context, prefixName]);\n\n  // List context\n  var listContext = React.useMemo(function () {\n    return {\n      getKey: function getKey(namePath) {\n        var len = prefixName.length;\n        var pathName = namePath[len];\n        return [keyManager.keys[pathName], namePath.slice(len + 1)];\n      }\n    };\n  }, [prefixName]);\n\n  // User should not pass `children` as other type.\n  if (typeof children !== 'function') {\n    warning(false, 'Form.List only accepts function as children.');\n    return null;\n  }\n  var shouldUpdate = function shouldUpdate(prevValue, nextValue, _ref2) {\n    var source = _ref2.source;\n    if (source === 'internal') {\n      return false;\n    }\n    return prevValue !== nextValue;\n  };\n  return /*#__PURE__*/React.createElement(ListContext.Provider, {\n    value: listContext\n  }, /*#__PURE__*/React.createElement(FieldContext.Provider, {\n    value: fieldContext\n  }, /*#__PURE__*/React.createElement(Field, {\n    name: [],\n    shouldUpdate: shouldUpdate,\n    rules: rules,\n    validateTrigger: validateTrigger,\n    initialValue: initialValue,\n    isList: true,\n    isListField: isListField !== null && isListField !== void 0 ? isListField : !!wrapperListContext\n  }, function (_ref3, meta) {\n    var _ref3$value = _ref3.value,\n      value = _ref3$value === void 0 ? [] : _ref3$value,\n      onChange = _ref3.onChange;\n    var getFieldValue = context.getFieldValue;\n    var getNewValue = function getNewValue() {\n      var values = getFieldValue(prefixName || []);\n      return values || [];\n    };\n    /**\n     * Always get latest value in case user update fields by `form` api.\n     */\n    var operations = {\n      add: function add(defaultValue, index) {\n        // Mapping keys\n        var newValue = getNewValue();\n        if (index >= 0 && index <= newValue.length) {\n          keyManager.keys = [].concat(_toConsumableArray(keyManager.keys.slice(0, index)), [keyManager.id], _toConsumableArray(keyManager.keys.slice(index)));\n          onChange([].concat(_toConsumableArray(newValue.slice(0, index)), [defaultValue], _toConsumableArray(newValue.slice(index))));\n        } else {\n          if (process.env.NODE_ENV !== 'production' && (index < 0 || index > newValue.length)) {\n            warning(false, 'The second parameter of the add function should be a valid positive number.');\n          }\n          keyManager.keys = [].concat(_toConsumableArray(keyManager.keys), [keyManager.id]);\n          onChange([].concat(_toConsumableArray(newValue), [defaultValue]));\n        }\n        keyManager.id += 1;\n      },\n      remove: function remove(index) {\n        var newValue = getNewValue();\n        var indexSet = new Set(Array.isArray(index) ? index : [index]);\n        if (indexSet.size <= 0) {\n          return;\n        }\n        keyManager.keys = keyManager.keys.filter(function (_, keysIndex) {\n          return !indexSet.has(keysIndex);\n        });\n\n        // Trigger store change\n        onChange(newValue.filter(function (_, valueIndex) {\n          return !indexSet.has(valueIndex);\n        }));\n      },\n      move: function move(from, to) {\n        if (from === to) {\n          return;\n        }\n        var newValue = getNewValue();\n\n        // Do not handle out of range\n        if (from < 0 || from >= newValue.length || to < 0 || to >= newValue.length) {\n          return;\n        }\n        keyManager.keys = _move(keyManager.keys, from, to);\n\n        // Trigger store change\n        onChange(_move(newValue, from, to));\n      }\n    };\n    var listValue = value || [];\n    if (!Array.isArray(listValue)) {\n      listValue = [];\n      if (process.env.NODE_ENV !== 'production') {\n        warning(false, \"Current value of '\".concat(prefixName.join(' > '), \"' is not an array type.\"));\n      }\n    }\n    return children(listValue.map(function (__, index) {\n      var key = keyManager.keys[index];\n      if (key === undefined) {\n        keyManager.keys[index] = keyManager.id;\n        key = keyManager.keys[index];\n        keyManager.id += 1;\n      }\n      return {\n        name: index,\n        key: key,\n        isListField: true\n      };\n    }), operations, meta);\n  })));\n}\nexport default List;","export function allPromiseFinish(promiseList) {\n  var hasError = false;\n  var count = promiseList.length;\n  var results = [];\n  if (!promiseList.length) {\n    return Promise.resolve([]);\n  }\n  return new Promise(function (resolve, reject) {\n    promiseList.forEach(function (promise, index) {\n      promise.catch(function (e) {\n        hasError = true;\n        return e;\n      }).then(function (result) {\n        count -= 1;\n        results[index] = result;\n        if (count > 0) {\n          return;\n        }\n        if (hasError) {\n          reject(results);\n        }\n        resolve(results);\n      });\n    });\n  });\n}","import _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _typeof from \"@babel/runtime/helpers/esm/typeof\";\nvar SPLIT = '__@field_split__';\n\n/**\n * Convert name path into string to fast the fetch speed of Map.\n */\nfunction normalize(namePath) {\n  return namePath.map(function (cell) {\n    return \"\".concat(_typeof(cell), \":\").concat(cell);\n  })\n  // Magic split\n  .join(SPLIT);\n}\n\n/**\n * NameMap like a `Map` but accepts `string[]` as key.\n */\nvar NameMap = /*#__PURE__*/function () {\n  function NameMap() {\n    _classCallCheck(this, NameMap);\n    _defineProperty(this, \"kvs\", new Map());\n  }\n  _createClass(NameMap, [{\n    key: \"set\",\n    value: function set(key, value) {\n      this.kvs.set(normalize(key), value);\n    }\n  }, {\n    key: \"get\",\n    value: function get(key) {\n      return this.kvs.get(normalize(key));\n    }\n  }, {\n    key: \"update\",\n    value: function update(key, updater) {\n      var origin = this.get(key);\n      var next = updater(origin);\n      if (!next) {\n        this.delete(key);\n      } else {\n        this.set(key, next);\n      }\n    }\n  }, {\n    key: \"delete\",\n    value: function _delete(key) {\n      this.kvs.delete(normalize(key));\n    }\n\n    // Since we only use this in test, let simply realize this\n  }, {\n    key: \"map\",\n    value: function map(callback) {\n      return _toConsumableArray(this.kvs.entries()).map(function (_ref) {\n        var _ref2 = _slicedToArray(_ref, 2),\n          key = _ref2[0],\n          value = _ref2[1];\n        var cells = key.split(SPLIT);\n        return callback({\n          key: cells.map(function (cell) {\n            var _cell$match = cell.match(/^([^:]*):(.*)$/),\n              _cell$match2 = _slicedToArray(_cell$match, 3),\n              type = _cell$match2[1],\n              unit = _cell$match2[2];\n            return type === 'number' ? Number(unit) : unit;\n          }),\n          value: value\n        });\n      });\n    }\n  }, {\n    key: \"toJSON\",\n    value: function toJSON() {\n      var json = {};\n      this.map(function (_ref3) {\n        var key = _ref3.key,\n          value = _ref3.value;\n        json[key.join('.')] = value;\n        return null;\n      });\n      return json;\n    }\n  }]);\n  return NameMap;\n}();\nexport default NameMap;","import _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport _typeof from \"@babel/runtime/helpers/esm/typeof\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nvar _excluded = [\"name\"];\nimport { merge } from \"rc-util/es/utils/set\";\nimport warning from \"rc-util/es/warning\";\nimport * as React from 'react';\nimport { HOOK_MARK } from \"./FieldContext\";\nimport { allPromiseFinish } from \"./utils/asyncUtil\";\nimport { defaultValidateMessages } from \"./utils/messages\";\nimport NameMap from \"./utils/NameMap\";\nimport { cloneByNamePathList, containsNamePath, getNamePath, getValue, matchNamePath, setValue } from \"./utils/valueUtil\";\nexport var FormStore = /*#__PURE__*/_createClass(function FormStore(forceRootUpdate) {\n  var _this = this;\n  _classCallCheck(this, FormStore);\n  _defineProperty(this, \"formHooked\", false);\n  _defineProperty(this, \"forceRootUpdate\", void 0);\n  _defineProperty(this, \"subscribable\", true);\n  _defineProperty(this, \"store\", {});\n  _defineProperty(this, \"fieldEntities\", []);\n  _defineProperty(this, \"initialValues\", {});\n  _defineProperty(this, \"callbacks\", {});\n  _defineProperty(this, \"validateMessages\", null);\n  _defineProperty(this, \"preserve\", null);\n  _defineProperty(this, \"lastValidatePromise\", null);\n  _defineProperty(this, \"getForm\", function () {\n    return {\n      getFieldValue: _this.getFieldValue,\n      getFieldsValue: _this.getFieldsValue,\n      getFieldError: _this.getFieldError,\n      getFieldWarning: _this.getFieldWarning,\n      getFieldsError: _this.getFieldsError,\n      isFieldsTouched: _this.isFieldsTouched,\n      isFieldTouched: _this.isFieldTouched,\n      isFieldValidating: _this.isFieldValidating,\n      isFieldsValidating: _this.isFieldsValidating,\n      resetFields: _this.resetFields,\n      setFields: _this.setFields,\n      setFieldValue: _this.setFieldValue,\n      setFieldsValue: _this.setFieldsValue,\n      validateFields: _this.validateFields,\n      submit: _this.submit,\n      _init: true,\n      getInternalHooks: _this.getInternalHooks\n    };\n  });\n  // ======================== Internal Hooks ========================\n  _defineProperty(this, \"getInternalHooks\", function (key) {\n    if (key === HOOK_MARK) {\n      _this.formHooked = true;\n      return {\n        dispatch: _this.dispatch,\n        initEntityValue: _this.initEntityValue,\n        registerField: _this.registerField,\n        useSubscribe: _this.useSubscribe,\n        setInitialValues: _this.setInitialValues,\n        destroyForm: _this.destroyForm,\n        setCallbacks: _this.setCallbacks,\n        setValidateMessages: _this.setValidateMessages,\n        getFields: _this.getFields,\n        setPreserve: _this.setPreserve,\n        getInitialValue: _this.getInitialValue,\n        registerWatch: _this.registerWatch\n      };\n    }\n    warning(false, '`getInternalHooks` is internal usage. Should not call directly.');\n    return null;\n  });\n  _defineProperty(this, \"useSubscribe\", function (subscribable) {\n    _this.subscribable = subscribable;\n  });\n  /**\n   * Record prev Form unmount fieldEntities which config preserve false.\n   * This need to be refill with initialValues instead of store value.\n   */\n  _defineProperty(this, \"prevWithoutPreserves\", null);\n  /**\n   * First time `setInitialValues` should update store with initial value\n   */\n  _defineProperty(this, \"setInitialValues\", function (initialValues, init) {\n    _this.initialValues = initialValues || {};\n    if (init) {\n      var _this$prevWithoutPres;\n      var nextStore = merge(initialValues, _this.store);\n\n      // We will take consider prev form unmount fields.\n      // When the field is not `preserve`, we need fill this with initialValues instead of store.\n      // eslint-disable-next-line array-callback-return\n      (_this$prevWithoutPres = _this.prevWithoutPreserves) === null || _this$prevWithoutPres === void 0 || _this$prevWithoutPres.map(function (_ref) {\n        var namePath = _ref.key;\n        nextStore = setValue(nextStore, namePath, getValue(initialValues, namePath));\n      });\n      _this.prevWithoutPreserves = null;\n      _this.updateStore(nextStore);\n    }\n  });\n  _defineProperty(this, \"destroyForm\", function (clearOnDestroy) {\n    if (clearOnDestroy) {\n      // destroy form reset store\n      _this.updateStore({});\n    } else {\n      // Fill preserve fields\n      var prevWithoutPreserves = new NameMap();\n      _this.getFieldEntities(true).forEach(function (entity) {\n        if (!_this.isMergedPreserve(entity.isPreserve())) {\n          prevWithoutPreserves.set(entity.getNamePath(), true);\n        }\n      });\n      _this.prevWithoutPreserves = prevWithoutPreserves;\n    }\n  });\n  _defineProperty(this, \"getInitialValue\", function (namePath) {\n    var initValue = getValue(_this.initialValues, namePath);\n\n    // Not cloneDeep when without `namePath`\n    return namePath.length ? merge(initValue) : initValue;\n  });\n  _defineProperty(this, \"setCallbacks\", function (callbacks) {\n    _this.callbacks = callbacks;\n  });\n  _defineProperty(this, \"setValidateMessages\", function (validateMessages) {\n    _this.validateMessages = validateMessages;\n  });\n  _defineProperty(this, \"setPreserve\", function (preserve) {\n    _this.preserve = preserve;\n  });\n  // ============================= Watch ============================\n  _defineProperty(this, \"watchList\", []);\n  _defineProperty(this, \"registerWatch\", function (callback) {\n    _this.watchList.push(callback);\n    return function () {\n      _this.watchList = _this.watchList.filter(function (fn) {\n        return fn !== callback;\n      });\n    };\n  });\n  _defineProperty(this, \"notifyWatch\", function () {\n    var namePath = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n    // No need to cost perf when nothing need to watch\n    if (_this.watchList.length) {\n      var values = _this.getFieldsValue();\n      var allValues = _this.getFieldsValue(true);\n      _this.watchList.forEach(function (callback) {\n        callback(values, allValues, namePath);\n      });\n    }\n  });\n  // ========================== Dev Warning =========================\n  _defineProperty(this, \"timeoutId\", null);\n  _defineProperty(this, \"warningUnhooked\", function () {\n    if (process.env.NODE_ENV !== 'production' && !_this.timeoutId && typeof window !== 'undefined') {\n      _this.timeoutId = setTimeout(function () {\n        _this.timeoutId = null;\n        if (!_this.formHooked) {\n          warning(false, 'Instance created by `useForm` is not connected to any Form element. Forget to pass `form` prop?');\n        }\n      });\n    }\n  });\n  // ============================ Store =============================\n  _defineProperty(this, \"updateStore\", function (nextStore) {\n    _this.store = nextStore;\n  });\n  // ============================ Fields ============================\n  /**\n   * Get registered field entities.\n   * @param pure Only return field which has a `name`. Default: false\n   */\n  _defineProperty(this, \"getFieldEntities\", function () {\n    var pure = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n    if (!pure) {\n      return _this.fieldEntities;\n    }\n    return _this.fieldEntities.filter(function (field) {\n      return field.getNamePath().length;\n    });\n  });\n  _defineProperty(this, \"getFieldsMap\", function () {\n    var pure = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n    var cache = new NameMap();\n    _this.getFieldEntities(pure).forEach(function (field) {\n      var namePath = field.getNamePath();\n      cache.set(namePath, field);\n    });\n    return cache;\n  });\n  _defineProperty(this, \"getFieldEntitiesForNamePathList\", function (nameList) {\n    if (!nameList) {\n      return _this.getFieldEntities(true);\n    }\n    var cache = _this.getFieldsMap(true);\n    return nameList.map(function (name) {\n      var namePath = getNamePath(name);\n      return cache.get(namePath) || {\n        INVALIDATE_NAME_PATH: getNamePath(name)\n      };\n    });\n  });\n  _defineProperty(this, \"getFieldsValue\", function (nameList, filterFunc) {\n    _this.warningUnhooked();\n\n    // Fill args\n    var mergedNameList;\n    var mergedFilterFunc;\n    var mergedStrict;\n    if (nameList === true || Array.isArray(nameList)) {\n      mergedNameList = nameList;\n      mergedFilterFunc = filterFunc;\n    } else if (nameList && _typeof(nameList) === 'object') {\n      mergedStrict = nameList.strict;\n      mergedFilterFunc = nameList.filter;\n    }\n    if (mergedNameList === true && !mergedFilterFunc) {\n      return _this.store;\n    }\n    var fieldEntities = _this.getFieldEntitiesForNamePathList(Array.isArray(mergedNameList) ? mergedNameList : null);\n    var filteredNameList = [];\n    fieldEntities.forEach(function (entity) {\n      var _isListField, _ref3;\n      var namePath = 'INVALIDATE_NAME_PATH' in entity ? entity.INVALIDATE_NAME_PATH : entity.getNamePath();\n\n      // Ignore when it's a list item and not specific the namePath,\n      // since parent field is already take in count\n      if (mergedStrict) {\n        var _isList, _ref2;\n        if ((_isList = (_ref2 = entity).isList) !== null && _isList !== void 0 && _isList.call(_ref2)) {\n          return;\n        }\n      } else if (!mergedNameList && (_isListField = (_ref3 = entity).isListField) !== null && _isListField !== void 0 && _isListField.call(_ref3)) {\n        return;\n      }\n      if (!mergedFilterFunc) {\n        filteredNameList.push(namePath);\n      } else {\n        var meta = 'getMeta' in entity ? entity.getMeta() : null;\n        if (mergedFilterFunc(meta)) {\n          filteredNameList.push(namePath);\n        }\n      }\n    });\n    return cloneByNamePathList(_this.store, filteredNameList.map(getNamePath));\n  });\n  _defineProperty(this, \"getFieldValue\", function (name) {\n    _this.warningUnhooked();\n    var namePath = getNamePath(name);\n    return getValue(_this.store, namePath);\n  });\n  _defineProperty(this, \"getFieldsError\", function (nameList) {\n    _this.warningUnhooked();\n    var fieldEntities = _this.getFieldEntitiesForNamePathList(nameList);\n    return fieldEntities.map(function (entity, index) {\n      if (entity && !('INVALIDATE_NAME_PATH' in entity)) {\n        return {\n          name: entity.getNamePath(),\n          errors: entity.getErrors(),\n          warnings: entity.getWarnings()\n        };\n      }\n      return {\n        name: getNamePath(nameList[index]),\n        errors: [],\n        warnings: []\n      };\n    });\n  });\n  _defineProperty(this, \"getFieldError\", function (name) {\n    _this.warningUnhooked();\n    var namePath = getNamePath(name);\n    var fieldError = _this.getFieldsError([namePath])[0];\n    return fieldError.errors;\n  });\n  _defineProperty(this, \"getFieldWarning\", function (name) {\n    _this.warningUnhooked();\n    var namePath = getNamePath(name);\n    var fieldError = _this.getFieldsError([namePath])[0];\n    return fieldError.warnings;\n  });\n  _defineProperty(this, \"isFieldsTouched\", function () {\n    _this.warningUnhooked();\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n    var arg0 = args[0],\n      arg1 = args[1];\n    var namePathList;\n    var isAllFieldsTouched = false;\n    if (args.length === 0) {\n      namePathList = null;\n    } else if (args.length === 1) {\n      if (Array.isArray(arg0)) {\n        namePathList = arg0.map(getNamePath);\n        isAllFieldsTouched = false;\n      } else {\n        namePathList = null;\n        isAllFieldsTouched = arg0;\n      }\n    } else {\n      namePathList = arg0.map(getNamePath);\n      isAllFieldsTouched = arg1;\n    }\n    var fieldEntities = _this.getFieldEntities(true);\n    var isFieldTouched = function isFieldTouched(field) {\n      return field.isFieldTouched();\n    };\n\n    // ===== Will get fully compare when not config namePathList =====\n    if (!namePathList) {\n      return isAllFieldsTouched ? fieldEntities.every(function (entity) {\n        return isFieldTouched(entity) || entity.isList();\n      }) : fieldEntities.some(isFieldTouched);\n    }\n\n    // Generate a nest tree for validate\n    var map = new NameMap();\n    namePathList.forEach(function (shortNamePath) {\n      map.set(shortNamePath, []);\n    });\n    fieldEntities.forEach(function (field) {\n      var fieldNamePath = field.getNamePath();\n\n      // Find matched entity and put into list\n      namePathList.forEach(function (shortNamePath) {\n        if (shortNamePath.every(function (nameUnit, i) {\n          return fieldNamePath[i] === nameUnit;\n        })) {\n          map.update(shortNamePath, function (list) {\n            return [].concat(_toConsumableArray(list), [field]);\n          });\n        }\n      });\n    });\n\n    // Check if NameMap value is touched\n    var isNamePathListTouched = function isNamePathListTouched(entities) {\n      return entities.some(isFieldTouched);\n    };\n    var namePathListEntities = map.map(function (_ref4) {\n      var value = _ref4.value;\n      return value;\n    });\n    return isAllFieldsTouched ? namePathListEntities.every(isNamePathListTouched) : namePathListEntities.some(isNamePathListTouched);\n  });\n  _defineProperty(this, \"isFieldTouched\", function (name) {\n    _this.warningUnhooked();\n    return _this.isFieldsTouched([name]);\n  });\n  _defineProperty(this, \"isFieldsValidating\", function (nameList) {\n    _this.warningUnhooked();\n    var fieldEntities = _this.getFieldEntities();\n    if (!nameList) {\n      return fieldEntities.some(function (testField) {\n        return testField.isFieldValidating();\n      });\n    }\n    var namePathList = nameList.map(getNamePath);\n    return fieldEntities.some(function (testField) {\n      var fieldNamePath = testField.getNamePath();\n      return containsNamePath(namePathList, fieldNamePath) && testField.isFieldValidating();\n    });\n  });\n  _defineProperty(this, \"isFieldValidating\", function (name) {\n    _this.warningUnhooked();\n    return _this.isFieldsValidating([name]);\n  });\n  /**\n   * Reset Field with field `initialValue` prop.\n   * Can pass `entities` or `namePathList` or just nothing.\n   */\n  _defineProperty(this, \"resetWithFieldInitialValue\", function () {\n    var info = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    // Create cache\n    var cache = new NameMap();\n    var fieldEntities = _this.getFieldEntities(true);\n    fieldEntities.forEach(function (field) {\n      var initialValue = field.props.initialValue;\n      var namePath = field.getNamePath();\n\n      // Record only if has `initialValue`\n      if (initialValue !== undefined) {\n        var records = cache.get(namePath) || new Set();\n        records.add({\n          entity: field,\n          value: initialValue\n        });\n        cache.set(namePath, records);\n      }\n    });\n\n    // Reset\n    var resetWithFields = function resetWithFields(entities) {\n      entities.forEach(function (field) {\n        var initialValue = field.props.initialValue;\n        if (initialValue !== undefined) {\n          var namePath = field.getNamePath();\n          var formInitialValue = _this.getInitialValue(namePath);\n          if (formInitialValue !== undefined) {\n            // Warning if conflict with form initialValues and do not modify value\n            warning(false, \"Form already set 'initialValues' with path '\".concat(namePath.join('.'), \"'. Field can not overwrite it.\"));\n          } else {\n            var records = cache.get(namePath);\n            if (records && records.size > 1) {\n              // Warning if multiple field set `initialValue`and do not modify value\n              warning(false, \"Multiple Field with path '\".concat(namePath.join('.'), \"' set 'initialValue'. Can not decide which one to pick.\"));\n            } else if (records) {\n              var originValue = _this.getFieldValue(namePath);\n              var isListField = field.isListField();\n\n              // Set `initialValue`\n              if (!isListField && (!info.skipExist || originValue === undefined)) {\n                _this.updateStore(setValue(_this.store, namePath, _toConsumableArray(records)[0].value));\n              }\n            }\n          }\n        }\n      });\n    };\n    var requiredFieldEntities;\n    if (info.entities) {\n      requiredFieldEntities = info.entities;\n    } else if (info.namePathList) {\n      requiredFieldEntities = [];\n      info.namePathList.forEach(function (namePath) {\n        var records = cache.get(namePath);\n        if (records) {\n          var _requiredFieldEntitie;\n          (_requiredFieldEntitie = requiredFieldEntities).push.apply(_requiredFieldEntitie, _toConsumableArray(_toConsumableArray(records).map(function (r) {\n            return r.entity;\n          })));\n        }\n      });\n    } else {\n      requiredFieldEntities = fieldEntities;\n    }\n    resetWithFields(requiredFieldEntities);\n  });\n  _defineProperty(this, \"resetFields\", function (nameList) {\n    _this.warningUnhooked();\n    var prevStore = _this.store;\n    if (!nameList) {\n      _this.updateStore(merge(_this.initialValues));\n      _this.resetWithFieldInitialValue();\n      _this.notifyObservers(prevStore, null, {\n        type: 'reset'\n      });\n      _this.notifyWatch();\n      return;\n    }\n\n    // Reset by `nameList`\n    var namePathList = nameList.map(getNamePath);\n    namePathList.forEach(function (namePath) {\n      var initialValue = _this.getInitialValue(namePath);\n      _this.updateStore(setValue(_this.store, namePath, initialValue));\n    });\n    _this.resetWithFieldInitialValue({\n      namePathList: namePathList\n    });\n    _this.notifyObservers(prevStore, namePathList, {\n      type: 'reset'\n    });\n    _this.notifyWatch(namePathList);\n  });\n  _defineProperty(this, \"setFields\", function (fields) {\n    _this.warningUnhooked();\n    var prevStore = _this.store;\n    var namePathList = [];\n    fields.forEach(function (fieldData) {\n      var name = fieldData.name,\n        data = _objectWithoutProperties(fieldData, _excluded);\n      var namePath = getNamePath(name);\n      namePathList.push(namePath);\n\n      // Value\n      if ('value' in data) {\n        _this.updateStore(setValue(_this.store, namePath, data.value));\n      }\n      _this.notifyObservers(prevStore, [namePath], {\n        type: 'setField',\n        data: fieldData\n      });\n    });\n    _this.notifyWatch(namePathList);\n  });\n  _defineProperty(this, \"getFields\", function () {\n    var entities = _this.getFieldEntities(true);\n    var fields = entities.map(function (field) {\n      var namePath = field.getNamePath();\n      var meta = field.getMeta();\n      var fieldData = _objectSpread(_objectSpread({}, meta), {}, {\n        name: namePath,\n        value: _this.getFieldValue(namePath)\n      });\n      Object.defineProperty(fieldData, 'originRCField', {\n        value: true\n      });\n      return fieldData;\n    });\n    return fields;\n  });\n  // =========================== Observer ===========================\n  /**\n   * This only trigger when a field is on constructor to avoid we get initialValue too late\n   */\n  _defineProperty(this, \"initEntityValue\", function (entity) {\n    var initialValue = entity.props.initialValue;\n    if (initialValue !== undefined) {\n      var namePath = entity.getNamePath();\n      var prevValue = getValue(_this.store, namePath);\n      if (prevValue === undefined) {\n        _this.updateStore(setValue(_this.store, namePath, initialValue));\n      }\n    }\n  });\n  _defineProperty(this, \"isMergedPreserve\", function (fieldPreserve) {\n    var mergedPreserve = fieldPreserve !== undefined ? fieldPreserve : _this.preserve;\n    return mergedPreserve !== null && mergedPreserve !== void 0 ? mergedPreserve : true;\n  });\n  _defineProperty(this, \"registerField\", function (entity) {\n    _this.fieldEntities.push(entity);\n    var namePath = entity.getNamePath();\n    _this.notifyWatch([namePath]);\n\n    // Set initial values\n    if (entity.props.initialValue !== undefined) {\n      var prevStore = _this.store;\n      _this.resetWithFieldInitialValue({\n        entities: [entity],\n        skipExist: true\n      });\n      _this.notifyObservers(prevStore, [entity.getNamePath()], {\n        type: 'valueUpdate',\n        source: 'internal'\n      });\n    }\n\n    // un-register field callback\n    return function (isListField, preserve) {\n      var subNamePath = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : [];\n      _this.fieldEntities = _this.fieldEntities.filter(function (item) {\n        return item !== entity;\n      });\n\n      // Clean up store value if not preserve\n      if (!_this.isMergedPreserve(preserve) && (!isListField || subNamePath.length > 1)) {\n        var defaultValue = isListField ? undefined : _this.getInitialValue(namePath);\n        if (namePath.length && _this.getFieldValue(namePath) !== defaultValue && _this.fieldEntities.every(function (field) {\n          return (\n            // Only reset when no namePath exist\n            !matchNamePath(field.getNamePath(), namePath)\n          );\n        })) {\n          var _prevStore = _this.store;\n          _this.updateStore(setValue(_prevStore, namePath, defaultValue, true));\n\n          // Notify that field is unmount\n          _this.notifyObservers(_prevStore, [namePath], {\n            type: 'remove'\n          });\n\n          // Dependencies update\n          _this.triggerDependenciesUpdate(_prevStore, namePath);\n        }\n      }\n      _this.notifyWatch([namePath]);\n    };\n  });\n  _defineProperty(this, \"dispatch\", function (action) {\n    switch (action.type) {\n      case 'updateValue':\n        {\n          var namePath = action.namePath,\n            value = action.value;\n          _this.updateValue(namePath, value);\n          break;\n        }\n      case 'validateField':\n        {\n          var _namePath = action.namePath,\n            triggerName = action.triggerName;\n          _this.validateFields([_namePath], {\n            triggerName: triggerName\n          });\n          break;\n        }\n      default:\n      // Currently we don't have other action. Do nothing.\n    }\n  });\n  _defineProperty(this, \"notifyObservers\", function (prevStore, namePathList, info) {\n    if (_this.subscribable) {\n      var mergedInfo = _objectSpread(_objectSpread({}, info), {}, {\n        store: _this.getFieldsValue(true)\n      });\n      _this.getFieldEntities().forEach(function (_ref5) {\n        var onStoreChange = _ref5.onStoreChange;\n        onStoreChange(prevStore, namePathList, mergedInfo);\n      });\n    } else {\n      _this.forceRootUpdate();\n    }\n  });\n  /**\n   * Notify dependencies children with parent update\n   * We need delay to trigger validate in case Field is under render props\n   */\n  _defineProperty(this, \"triggerDependenciesUpdate\", function (prevStore, namePath) {\n    var childrenFields = _this.getDependencyChildrenFields(namePath);\n    if (childrenFields.length) {\n      _this.validateFields(childrenFields);\n    }\n    _this.notifyObservers(prevStore, childrenFields, {\n      type: 'dependenciesUpdate',\n      relatedFields: [namePath].concat(_toConsumableArray(childrenFields))\n    });\n    return childrenFields;\n  });\n  _defineProperty(this, \"updateValue\", function (name, value) {\n    var namePath = getNamePath(name);\n    var prevStore = _this.store;\n    _this.updateStore(setValue(_this.store, namePath, value));\n    _this.notifyObservers(prevStore, [namePath], {\n      type: 'valueUpdate',\n      source: 'internal'\n    });\n    _this.notifyWatch([namePath]);\n\n    // Dependencies update\n    var childrenFields = _this.triggerDependenciesUpdate(prevStore, namePath);\n\n    // trigger callback function\n    var onValuesChange = _this.callbacks.onValuesChange;\n    if (onValuesChange) {\n      var changedValues = cloneByNamePathList(_this.store, [namePath]);\n      onValuesChange(changedValues, _this.getFieldsValue());\n    }\n    _this.triggerOnFieldsChange([namePath].concat(_toConsumableArray(childrenFields)));\n  });\n  // Let all child Field get update.\n  _defineProperty(this, \"setFieldsValue\", function (store) {\n    _this.warningUnhooked();\n    var prevStore = _this.store;\n    if (store) {\n      var nextStore = merge(_this.store, store);\n      _this.updateStore(nextStore);\n    }\n    _this.notifyObservers(prevStore, null, {\n      type: 'valueUpdate',\n      source: 'external'\n    });\n    _this.notifyWatch();\n  });\n  _defineProperty(this, \"setFieldValue\", function (name, value) {\n    _this.setFields([{\n      name: name,\n      value: value,\n      errors: [],\n      warnings: []\n    }]);\n  });\n  _defineProperty(this, \"getDependencyChildrenFields\", function (rootNamePath) {\n    var children = new Set();\n    var childrenFields = [];\n    var dependencies2fields = new NameMap();\n\n    /**\n     * Generate maps\n     * Can use cache to save perf if user report performance issue with this\n     */\n    _this.getFieldEntities().forEach(function (field) {\n      var dependencies = field.props.dependencies;\n      (dependencies || []).forEach(function (dependency) {\n        var dependencyNamePath = getNamePath(dependency);\n        dependencies2fields.update(dependencyNamePath, function () {\n          var fields = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : new Set();\n          fields.add(field);\n          return fields;\n        });\n      });\n    });\n    var fillChildren = function fillChildren(namePath) {\n      var fields = dependencies2fields.get(namePath) || new Set();\n      fields.forEach(function (field) {\n        if (!children.has(field)) {\n          children.add(field);\n          var fieldNamePath = field.getNamePath();\n          if (field.isFieldDirty() && fieldNamePath.length) {\n            childrenFields.push(fieldNamePath);\n            fillChildren(fieldNamePath);\n          }\n        }\n      });\n    };\n    fillChildren(rootNamePath);\n    return childrenFields;\n  });\n  _defineProperty(this, \"triggerOnFieldsChange\", function (namePathList, filedErrors) {\n    var onFieldsChange = _this.callbacks.onFieldsChange;\n    if (onFieldsChange) {\n      var fields = _this.getFields();\n\n      /**\n       * Fill errors since `fields` may be replaced by controlled fields\n       */\n      if (filedErrors) {\n        var cache = new NameMap();\n        filedErrors.forEach(function (_ref6) {\n          var name = _ref6.name,\n            errors = _ref6.errors;\n          cache.set(name, errors);\n        });\n        fields.forEach(function (field) {\n          // eslint-disable-next-line no-param-reassign\n          field.errors = cache.get(field.name) || field.errors;\n        });\n      }\n      var changedFields = fields.filter(function (_ref7) {\n        var fieldName = _ref7.name;\n        return containsNamePath(namePathList, fieldName);\n      });\n      if (changedFields.length) {\n        onFieldsChange(changedFields, fields);\n      }\n    }\n  });\n  // =========================== Validate ===========================\n  _defineProperty(this, \"validateFields\", function (arg1, arg2) {\n    _this.warningUnhooked();\n    var nameList;\n    var options;\n    if (Array.isArray(arg1) || typeof arg1 === 'string' || typeof arg2 === 'string') {\n      nameList = arg1;\n      options = arg2;\n    } else {\n      options = arg1;\n    }\n    var provideNameList = !!nameList;\n    var namePathList = provideNameList ? nameList.map(getNamePath) : [];\n\n    // Collect result in promise list\n    var promiseList = [];\n\n    // We temp save the path which need trigger for `onFieldsChange`\n    var TMP_SPLIT = String(Date.now());\n    var validateNamePathList = new Set();\n    var _ref8 = options || {},\n      recursive = _ref8.recursive,\n      dirty = _ref8.dirty;\n    _this.getFieldEntities(true).forEach(function (field) {\n      // Add field if not provide `nameList`\n      if (!provideNameList) {\n        namePathList.push(field.getNamePath());\n      }\n\n      // Skip if without rule\n      if (!field.props.rules || !field.props.rules.length) {\n        return;\n      }\n\n      // Skip if only validate dirty field\n      if (dirty && !field.isFieldDirty()) {\n        return;\n      }\n      var fieldNamePath = field.getNamePath();\n      validateNamePathList.add(fieldNamePath.join(TMP_SPLIT));\n\n      // Add field validate rule in to promise list\n      if (!provideNameList || containsNamePath(namePathList, fieldNamePath, recursive)) {\n        var promise = field.validateRules(_objectSpread({\n          validateMessages: _objectSpread(_objectSpread({}, defaultValidateMessages), _this.validateMessages)\n        }, options));\n\n        // Wrap promise with field\n        promiseList.push(promise.then(function () {\n          return {\n            name: fieldNamePath,\n            errors: [],\n            warnings: []\n          };\n        }).catch(function (ruleErrors) {\n          var _ruleErrors$forEach;\n          var mergedErrors = [];\n          var mergedWarnings = [];\n          (_ruleErrors$forEach = ruleErrors.forEach) === null || _ruleErrors$forEach === void 0 || _ruleErrors$forEach.call(ruleErrors, function (_ref9) {\n            var warningOnly = _ref9.rule.warningOnly,\n              errors = _ref9.errors;\n            if (warningOnly) {\n              mergedWarnings.push.apply(mergedWarnings, _toConsumableArray(errors));\n            } else {\n              mergedErrors.push.apply(mergedErrors, _toConsumableArray(errors));\n            }\n          });\n          if (mergedErrors.length) {\n            return Promise.reject({\n              name: fieldNamePath,\n              errors: mergedErrors,\n              warnings: mergedWarnings\n            });\n          }\n          return {\n            name: fieldNamePath,\n            errors: mergedErrors,\n            warnings: mergedWarnings\n          };\n        }));\n      }\n    });\n    var summaryPromise = allPromiseFinish(promiseList);\n    _this.lastValidatePromise = summaryPromise;\n\n    // Notify fields with rule that validate has finished and need update\n    summaryPromise.catch(function (results) {\n      return results;\n    }).then(function (results) {\n      var resultNamePathList = results.map(function (_ref10) {\n        var name = _ref10.name;\n        return name;\n      });\n      _this.notifyObservers(_this.store, resultNamePathList, {\n        type: 'validateFinish'\n      });\n      _this.triggerOnFieldsChange(resultNamePathList, results);\n    });\n    var returnPromise = summaryPromise.then(function () {\n      if (_this.lastValidatePromise === summaryPromise) {\n        return Promise.resolve(_this.getFieldsValue(namePathList));\n      }\n      return Promise.reject([]);\n    }).catch(function (results) {\n      var errorList = results.filter(function (result) {\n        return result && result.errors.length;\n      });\n      return Promise.reject({\n        values: _this.getFieldsValue(namePathList),\n        errorFields: errorList,\n        outOfDate: _this.lastValidatePromise !== summaryPromise\n      });\n    });\n\n    // Do not throw in console\n    returnPromise.catch(function (e) {\n      return e;\n    });\n\n    // `validating` changed. Trigger `onFieldsChange`\n    var triggerNamePathList = namePathList.filter(function (namePath) {\n      return validateNamePathList.has(namePath.join(TMP_SPLIT));\n    });\n    _this.triggerOnFieldsChange(triggerNamePathList);\n    return returnPromise;\n  });\n  // ============================ Submit ============================\n  _defineProperty(this, \"submit\", function () {\n    _this.warningUnhooked();\n    _this.validateFields().then(function (values) {\n      var onFinish = _this.callbacks.onFinish;\n      if (onFinish) {\n        try {\n          onFinish(values);\n        } catch (err) {\n          // Should print error if user `onFinish` callback failed\n          console.error(err);\n        }\n      }\n    }).catch(function (e) {\n      var onFinishFailed = _this.callbacks.onFinishFailed;\n      if (onFinishFailed) {\n        onFinishFailed(e);\n      }\n    });\n  });\n  this.forceRootUpdate = forceRootUpdate;\n});\nfunction useForm(form) {\n  var formRef = React.useRef();\n  var _React$useState = React.useState({}),\n    _React$useState2 = _slicedToArray(_React$useState, 2),\n    forceUpdate = _React$useState2[1];\n  if (!formRef.current) {\n    if (form) {\n      formRef.current = form;\n    } else {\n      // Create a new FormStore if not provided\n      var forceReRender = function forceReRender() {\n        forceUpdate({});\n      };\n      var formStore = new FormStore(forceReRender);\n      formRef.current = formStore.getForm();\n    }\n  }\n  return [formRef.current];\n}\nexport default useForm;","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport * as React from 'react';\nvar FormContext = /*#__PURE__*/React.createContext({\n  triggerFormChange: function triggerFormChange() {},\n  triggerFormFinish: function triggerFormFinish() {},\n  registerForm: function registerForm() {},\n  unregisterForm: function unregisterForm() {}\n});\nvar FormProvider = function FormProvider(_ref) {\n  var validateMessages = _ref.validateMessages,\n    onFormChange = _ref.onFormChange,\n    onFormFinish = _ref.onFormFinish,\n    children = _ref.children;\n  var formContext = React.useContext(FormContext);\n  var formsRef = React.useRef({});\n  return /*#__PURE__*/React.createElement(FormContext.Provider, {\n    value: _objectSpread(_objectSpread({}, formContext), {}, {\n      validateMessages: _objectSpread(_objectSpread({}, formContext.validateMessages), validateMessages),\n      // =========================================================\n      // =                  Global Form Control                  =\n      // =========================================================\n      triggerFormChange: function triggerFormChange(name, changedFields) {\n        if (onFormChange) {\n          onFormChange(name, {\n            changedFields: changedFields,\n            forms: formsRef.current\n          });\n        }\n        formContext.triggerFormChange(name, changedFields);\n      },\n      triggerFormFinish: function triggerFormFinish(name, values) {\n        if (onFormFinish) {\n          onFormFinish(name, {\n            values: values,\n            forms: formsRef.current\n          });\n        }\n        formContext.triggerFormFinish(name, values);\n      },\n      registerForm: function registerForm(name, form) {\n        if (name) {\n          formsRef.current = _objectSpread(_objectSpread({}, formsRef.current), {}, _defineProperty({}, name, form));\n        }\n        formContext.registerForm(name, form);\n      },\n      unregisterForm: function unregisterForm(name) {\n        var newForms = _objectSpread({}, formsRef.current);\n        delete newForms[name];\n        formsRef.current = newForms;\n        formContext.unregisterForm(name);\n      }\n    })\n  }, children);\n};\nexport { FormProvider };\nexport default FormContext;","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nvar _excluded = [\"name\", \"initialValues\", \"fields\", \"form\", \"preserve\", \"children\", \"component\", \"validateMessages\", \"validateTrigger\", \"onValuesChange\", \"onFieldsChange\", \"onFinish\", \"onFinishFailed\", \"clearOnDestroy\"];\nimport * as React from 'react';\nimport useForm from \"./useForm\";\nimport FieldContext, { HOOK_MARK } from \"./FieldContext\";\nimport FormContext from \"./FormContext\";\nimport { isSimilar } from \"./utils/valueUtil\";\nimport ListContext from \"./ListContext\";\nvar Form = function Form(_ref, ref) {\n  var name = _ref.name,\n    initialValues = _ref.initialValues,\n    fields = _ref.fields,\n    form = _ref.form,\n    preserve = _ref.preserve,\n    children = _ref.children,\n    _ref$component = _ref.component,\n    Component = _ref$component === void 0 ? 'form' : _ref$component,\n    validateMessages = _ref.validateMessages,\n    _ref$validateTrigger = _ref.validateTrigger,\n    validateTrigger = _ref$validateTrigger === void 0 ? 'onChange' : _ref$validateTrigger,\n    onValuesChange = _ref.onValuesChange,\n    _onFieldsChange = _ref.onFieldsChange,\n    _onFinish = _ref.onFinish,\n    onFinishFailed = _ref.onFinishFailed,\n    clearOnDestroy = _ref.clearOnDestroy,\n    restProps = _objectWithoutProperties(_ref, _excluded);\n  var nativeElementRef = React.useRef(null);\n  var formContext = React.useContext(FormContext);\n\n  // We customize handle event since Context will makes all the consumer re-render:\n  // https://reactjs.org/docs/context.html#contextprovider\n  var _useForm = useForm(form),\n    _useForm2 = _slicedToArray(_useForm, 1),\n    formInstance = _useForm2[0];\n  var _getInternalHooks = formInstance.getInternalHooks(HOOK_MARK),\n    useSubscribe = _getInternalHooks.useSubscribe,\n    setInitialValues = _getInternalHooks.setInitialValues,\n    setCallbacks = _getInternalHooks.setCallbacks,\n    setValidateMessages = _getInternalHooks.setValidateMessages,\n    setPreserve = _getInternalHooks.setPreserve,\n    destroyForm = _getInternalHooks.destroyForm;\n\n  // Pass ref with form instance\n  React.useImperativeHandle(ref, function () {\n    return _objectSpread(_objectSpread({}, formInstance), {}, {\n      nativeElement: nativeElementRef.current\n    });\n  });\n\n  // Register form into Context\n  React.useEffect(function () {\n    formContext.registerForm(name, formInstance);\n    return function () {\n      formContext.unregisterForm(name);\n    };\n  }, [formContext, formInstance, name]);\n\n  // Pass props to store\n  setValidateMessages(_objectSpread(_objectSpread({}, formContext.validateMessages), validateMessages));\n  setCallbacks({\n    onValuesChange: onValuesChange,\n    onFieldsChange: function onFieldsChange(changedFields) {\n      formContext.triggerFormChange(name, changedFields);\n      if (_onFieldsChange) {\n        for (var _len = arguments.length, rest = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n          rest[_key - 1] = arguments[_key];\n        }\n        _onFieldsChange.apply(void 0, [changedFields].concat(rest));\n      }\n    },\n    onFinish: function onFinish(values) {\n      formContext.triggerFormFinish(name, values);\n      if (_onFinish) {\n        _onFinish(values);\n      }\n    },\n    onFinishFailed: onFinishFailed\n  });\n  setPreserve(preserve);\n\n  // Set initial value, init store value when first mount\n  var mountRef = React.useRef(null);\n  setInitialValues(initialValues, !mountRef.current);\n  if (!mountRef.current) {\n    mountRef.current = true;\n  }\n  React.useEffect(function () {\n    return function () {\n      return destroyForm(clearOnDestroy);\n    };\n  },\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  []);\n\n  // Prepare children by `children` type\n  var childrenNode;\n  var childrenRenderProps = typeof children === 'function';\n  if (childrenRenderProps) {\n    var _values = formInstance.getFieldsValue(true);\n    childrenNode = children(_values, formInstance);\n  } else {\n    childrenNode = children;\n  }\n\n  // Not use subscribe when using render props\n  useSubscribe(!childrenRenderProps);\n\n  // Listen if fields provided. We use ref to save prev data here to avoid additional render\n  var prevFieldsRef = React.useRef();\n  React.useEffect(function () {\n    if (!isSimilar(prevFieldsRef.current || [], fields || [])) {\n      formInstance.setFields(fields || []);\n    }\n    prevFieldsRef.current = fields;\n  }, [fields, formInstance]);\n  var formContextValue = React.useMemo(function () {\n    return _objectSpread(_objectSpread({}, formInstance), {}, {\n      validateTrigger: validateTrigger\n    });\n  }, [formInstance, validateTrigger]);\n  var wrapperNode = /*#__PURE__*/React.createElement(ListContext.Provider, {\n    value: null\n  }, /*#__PURE__*/React.createElement(FieldContext.Provider, {\n    value: formContextValue\n  }, childrenNode));\n  if (Component === false) {\n    return wrapperNode;\n  }\n  return /*#__PURE__*/React.createElement(Component, _extends({}, restProps, {\n    ref: nativeElementRef,\n    onSubmit: function onSubmit(event) {\n      event.preventDefault();\n      event.stopPropagation();\n      formInstance.submit();\n    },\n    onReset: function onReset(event) {\n      var _restProps$onReset;\n      event.preventDefault();\n      formInstance.resetFields();\n      (_restProps$onReset = restProps.onReset) === null || _restProps$onReset === void 0 || _restProps$onReset.call(restProps, event);\n    }\n  }), wrapperNode);\n};\nexport default Form;","import _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport warning from \"rc-util/es/warning\";\nimport { useContext, useEffect, useMemo, useRef, useState } from 'react';\nimport FieldContext, { HOOK_MARK } from \"./FieldContext\";\nimport { isFormInstance } from \"./utils/typeUtil\";\nimport { getNamePath, getValue } from \"./utils/valueUtil\";\nexport function stringify(value) {\n  try {\n    return JSON.stringify(value);\n  } catch (err) {\n    return Math.random();\n  }\n}\nvar useWatchWarning = process.env.NODE_ENV !== 'production' ? function (namePath) {\n  var fullyStr = namePath.join('__RC_FIELD_FORM_SPLIT__');\n  var nameStrRef = useRef(fullyStr);\n  warning(nameStrRef.current === fullyStr, '`useWatch` is not support dynamic `namePath`. Please provide static instead.');\n} : function () {};\n\n// ------- selector type -------\n\n// ------- selector type end -------\n\nfunction useWatch() {\n  for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n    args[_key] = arguments[_key];\n  }\n  var dependencies = args[0],\n    _args$ = args[1],\n    _form = _args$ === void 0 ? {} : _args$;\n  var options = isFormInstance(_form) ? {\n    form: _form\n  } : _form;\n  var form = options.form;\n  var _useState = useState(),\n    _useState2 = _slicedToArray(_useState, 2),\n    value = _useState2[0],\n    setValue = _useState2[1];\n  var valueStr = useMemo(function () {\n    return stringify(value);\n  }, [value]);\n  var valueStrRef = useRef(valueStr);\n  valueStrRef.current = valueStr;\n  var fieldContext = useContext(FieldContext);\n  var formInstance = form || fieldContext;\n  var isValidForm = formInstance && formInstance._init;\n\n  // Warning if not exist form instance\n  if (process.env.NODE_ENV !== 'production') {\n    warning(args.length === 2 ? form ? isValidForm : true : isValidForm, 'useWatch requires a form instance since it can not auto detect from context.');\n  }\n  var namePath = getNamePath(dependencies);\n  var namePathRef = useRef(namePath);\n  namePathRef.current = namePath;\n  useWatchWarning(namePath);\n  useEffect(function () {\n    // Skip if not exist form instance\n    if (!isValidForm) {\n      return;\n    }\n    var getFieldsValue = formInstance.getFieldsValue,\n      getInternalHooks = formInstance.getInternalHooks;\n    var _getInternalHooks = getInternalHooks(HOOK_MARK),\n      registerWatch = _getInternalHooks.registerWatch;\n    var getWatchValue = function getWatchValue(values, allValues) {\n      var watchValue = options.preserve ? allValues : values;\n      return typeof dependencies === 'function' ? dependencies(watchValue) : getValue(watchValue, namePathRef.current);\n    };\n    var cancelRegister = registerWatch(function (values, allValues) {\n      var newValue = getWatchValue(values, allValues);\n      var nextValueStr = stringify(newValue);\n\n      // Compare stringify in case it's nest object\n      if (valueStrRef.current !== nextValueStr) {\n        valueStrRef.current = nextValueStr;\n        setValue(newValue);\n      }\n    });\n\n    // TODO: We can improve this perf in future\n    var initialValue = getWatchValue(getFieldsValue(), getFieldsValue(true));\n\n    // React 18 has the bug that will queue update twice even the value is not changed\n    // ref: https://github.com/facebook/react/issues/27213\n    if (value !== initialValue) {\n      setValue(initialValue);\n    }\n    return cancelRegister;\n  },\n  // We do not need re-register since namePath content is the same\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  [isValidForm]);\n  return value;\n}\nexport default useWatch;","import * as React from 'react';\nimport Field from \"./Field\";\nimport List from \"./List\";\nimport useForm from \"./useForm\";\nimport FieldForm from \"./Form\";\nimport { FormProvider } from \"./FormContext\";\nimport FieldContext from \"./FieldContext\";\nimport ListContext from \"./ListContext\";\nimport useWatch from \"./useWatch\";\nvar InternalForm = /*#__PURE__*/React.forwardRef(FieldForm);\nvar RefForm = InternalForm;\nRefForm.FormProvider = FormProvider;\nRefForm.Field = Field;\nRefForm.List = List;\nRefForm.useForm = useForm;\nRefForm.useWatch = useWatch;\nexport { Field, List, useForm, FormProvider, FieldContext, ListContext, useWatch };\nexport default RefForm;"],"names":["HOOK_MARK","warningFunc","warning","Context","React.createContext","ListContext","toArray","value","isFormInstance","form","typeTemplate","defaultValidateMessages","AsyncValidator","RawAsyncValidator","replaceMessage","template","kv","str","key","CODE_LOGIC_ERROR","validateRule","_x","_x2","_x3","_x4","_x5","_validateRule","_asyncToGenerator","_regeneratorRuntime","_callee2","name","rule","options","messageVariables","cloneRule","originValidator","subRuleField","validator","messages","result","subResults","fillVariableResult","_context2","_objectSpread","error","_defineProperty","merge","_ref4","index","message","mergedMessage","React.isValidElement","React.cloneElement","subValue","i","prev","errors","_toConsumableArray","validateRules","namePath","rules","validateFirst","filledRules","currentRule","ruleIndex","originValidatorFunc","val","callback","hasPromise","wrappedCallback","_len","args","_key","promise","err","_ref","_ref2","w1","i1","w2","i2","summaryPromise","_ref3","_callee","resolve","reject","_context","_x6","_x7","rulePromises","finishOnFirstFailed","finishOnAllFailed","e","_x8","_finishOnAllFailed","_callee3","_context3","errorsList","_ref5","_x9","_finishOnFirstFailed","_callee4","count","_context4","ruleError","getNamePath","path","cloneByNamePathList","store","namePathList","newStore","getValue","setValue","containsNamePath","partialMatch","matchNamePath","subNamePath","nameUnit","isSimilar","source","target","_typeof","sourceKeys","targetKeys","keys","sourceValue","targetValue","defaultGetValueFromEvent","valuePropName","event","move","array","moveIndex","toIndex","length","item","diff","_excluded","EMPTY_ERRORS","requireUpdate","shouldUpdate","next","prevValue","nextValue","info","Field","_React$Component","_inherits","_super","_createSuper","props","_this","_classCallCheck","_assertThisInitialized","_this$props","preserve","isListField","_this$props2","fieldContext","_fieldContext$prefixN","prefixName","_this$props3","_this$props3$rules","resetCount","destroy","onMetaChange","_meta","isEqual","prevStore","_this$props4","_this$props4$dependen","dependencies","onReset","curValue","namePathMatch","data","dependencyList","dependency","currentValue","triggerName","_ref2$validateOnly","validateOnly","rootPromise","_this$props5","_this$props5$validate","validateDebounce","filteredRules","validateTrigger","triggerList","ruleErrors","_ruleErrors$forEach","nextErrors","nextWarnings","warningOnly","_ref4$errors","_fieldContext$getInte","getInitialValue","meta","children","_meta2","childList","toChildrenArray","getFieldsValue","childProps","_this$props6","trigger","getValueFromEvent","normalize","getValueProps","mergedValidateTrigger","getInternalHooks","_getInternalHooks","dispatch","mergedGetValueProps","originTriggerFunc","valueProps","control","newValue","validateTriggerList","originTrigger","_getInternalHooks2","initEntityValue","_createClass","_this$props7","_getInternalHooks3","registerField","_this$getOnlyChild","child","isFunction","returnChildNode","React.createElement","React.Fragment","React.Component","FieldContext","WrapperField","_ref6","_restProps$isListFiel","restProps","_objectWithoutProperties","React.useContext","listContext","isMergedListField","_extends","List","initialValue","context","wrapperListContext","keyRef","React.useRef","keyManager","React.useMemo","parentPrefixName","len","pathName","_ref3$value","onChange","getFieldValue","getNewValue","values","operations","defaultValue","indexSet","_","keysIndex","valueIndex","from","to","_move","listValue","__","allPromiseFinish","promiseList","hasError","results","SPLIT","cell","NameMap","updater","origin","_slicedToArray","cells","_cell$match","_cell$match2","type","unit","json","FormStore","forceRootUpdate","subscribable","initialValues","init","_this$prevWithoutPres","nextStore","clearOnDestroy","prevWithoutPreserves","entity","initValue","callbacks","validateMessages","fn","allValues","pure","field","cache","nameList","filterFunc","mergedNameList","mergedFilterFunc","mergedStrict","fieldEntities","filteredNameList","_isListField","_isList","fieldError","arg0","arg1","isAllFieldsTouched","isFieldTouched","map","shortNamePath","fieldNamePath","list","isNamePathListTouched","entities","namePathListEntities","testField","records","resetWithFields","formInitialValue","originValue","requiredFieldEntities","_requiredFieldEntitie","r","fields","fieldData","fieldPreserve","mergedPreserve","_prevStore","action","_namePath","mergedInfo","onStoreChange","childrenFields","onValuesChange","changedValues","rootNamePath","dependencies2fields","dependencyNamePath","fillChildren","filedErrors","onFieldsChange","changedFields","_ref7","fieldName","arg2","provideNameList","TMP_SPLIT","validateNamePathList","_ref8","recursive","dirty","mergedErrors","mergedWarnings","_ref9","resultNamePathList","_ref10","returnPromise","errorList","triggerNamePathList","onFinish","onFinishFailed","useForm","formRef","_React$useState","React.useState","_React$useState2","forceUpdate","forceReRender","formStore","FormContext","FormProvider","onFormChange","onFormFinish","formContext","formsRef","newForms","Form","ref","_ref$component","Component","_ref$validateTrigger","_onFieldsChange","_onFinish","nativeElementRef","_useForm","_useForm2","formInstance","useSubscribe","setInitialValues","setCallbacks","setValidateMessages","setPreserve","destroyForm","React.useImperativeHandle","React.useEffect","rest","mountRef","childrenNode","childrenRenderProps","_values","prevFieldsRef","formContextValue","wrapperNode","_restProps$onReset","stringify","useWatch","_args$","_form","_useState","useState","_useState2","valueStr","useMemo","valueStrRef","useRef","useContext","isValidForm","namePathRef","useEffect","registerWatch","getWatchValue","watchValue","cancelRegister","nextValueStr","InternalForm","React.forwardRef","FieldForm","RefForm"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14]}