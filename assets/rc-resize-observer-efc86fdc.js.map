{"version":3,"file":"rc-resize-observer-efc86fdc.js","sources":["../../node_modules/rc-resize-observer/es/Collection.js","../../node_modules/rc-resize-observer/es/utils/observerUtil.js","../../node_modules/rc-resize-observer/es/SingleObserver/DomWrapper.js","../../node_modules/rc-resize-observer/es/SingleObserver/index.js","../../node_modules/rc-resize-observer/es/index.js"],"sourcesContent":["import * as React from 'react';\nexport var CollectionContext = /*#__PURE__*/React.createContext(null);\n/**\n * Collect all the resize event from children ResizeObserver\n */\nexport function Collection(_ref) {\n  var children = _ref.children,\n    onBatchResize = _ref.onBatchResize;\n  var resizeIdRef = React.useRef(0);\n  var resizeInfosRef = React.useRef([]);\n  var onCollectionResize = React.useContext(CollectionContext);\n  var onResize = React.useCallback(function (size, element, data) {\n    resizeIdRef.current += 1;\n    var currentId = resizeIdRef.current;\n    resizeInfosRef.current.push({\n      size: size,\n      element: element,\n      data: data\n    });\n    Promise.resolve().then(function () {\n      if (currentId === resizeIdRef.current) {\n        onBatchResize === null || onBatchResize === void 0 || onBatchResize(resizeInfosRef.current);\n        resizeInfosRef.current = [];\n      }\n    });\n\n    // Continue bubbling if parent exist\n    onCollectionResize === null || onCollectionResize === void 0 || onCollectionResize(size, element, data);\n  }, [onBatchResize, onCollectionResize]);\n  return /*#__PURE__*/React.createElement(CollectionContext.Provider, {\n    value: onResize\n  }, children);\n}","import ResizeObserver from 'resize-observer-polyfill';\n// =============================== Const ===============================\nvar elementListeners = new Map();\nfunction onResize(entities) {\n  entities.forEach(function (entity) {\n    var _elementListeners$get;\n    var target = entity.target;\n    (_elementListeners$get = elementListeners.get(target)) === null || _elementListeners$get === void 0 || _elementListeners$get.forEach(function (listener) {\n      return listener(target);\n    });\n  });\n}\n\n// Note: ResizeObserver polyfill not support option to measure border-box resize\nvar resizeObserver = new ResizeObserver(onResize);\n\n// Dev env only\nexport var _el = process.env.NODE_ENV !== 'production' ? elementListeners : null; // eslint-disable-line\nexport var _rs = process.env.NODE_ENV !== 'production' ? onResize : null; // eslint-disable-line\n\n// ============================== Observe ==============================\nexport function observe(element, callback) {\n  if (!elementListeners.has(element)) {\n    elementListeners.set(element, new Set());\n    resizeObserver.observe(element);\n  }\n  elementListeners.get(element).add(callback);\n}\nexport function unobserve(element, callback) {\n  if (elementListeners.has(element)) {\n    elementListeners.get(element).delete(callback);\n    if (!elementListeners.get(element).size) {\n      resizeObserver.unobserve(element);\n      elementListeners.delete(element);\n    }\n  }\n}","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"@babel/runtime/helpers/esm/createSuper\";\nimport * as React from 'react';\n/**\n * Fallback to findDOMNode if origin ref do not provide any dom element\n */\nvar DomWrapper = /*#__PURE__*/function (_React$Component) {\n  _inherits(DomWrapper, _React$Component);\n  var _super = _createSuper(DomWrapper);\n  function DomWrapper() {\n    _classCallCheck(this, DomWrapper);\n    return _super.apply(this, arguments);\n  }\n  _createClass(DomWrapper, [{\n    key: \"render\",\n    value: function render() {\n      return this.props.children;\n    }\n  }]);\n  return DomWrapper;\n}(React.Component);\nexport { DomWrapper as default };","import _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport _typeof from \"@babel/runtime/helpers/esm/typeof\";\nimport findDOMNode from \"rc-util/es/Dom/findDOMNode\";\nimport { supportRef, useComposeRef, getNodeRef } from \"rc-util/es/ref\";\nimport * as React from 'react';\nimport { CollectionContext } from \"../Collection\";\nimport { observe, unobserve } from \"../utils/observerUtil\";\nimport DomWrapper from \"./DomWrapper\";\nfunction SingleObserver(props, ref) {\n  var children = props.children,\n    disabled = props.disabled;\n  var elementRef = React.useRef(null);\n  var wrapperRef = React.useRef(null);\n  var onCollectionResize = React.useContext(CollectionContext);\n\n  // =========================== Children ===========================\n  var isRenderProps = typeof children === 'function';\n  var mergedChildren = isRenderProps ? children(elementRef) : children;\n\n  // ============================= Size =============================\n  var sizeRef = React.useRef({\n    width: -1,\n    height: -1,\n    offsetWidth: -1,\n    offsetHeight: -1\n  });\n\n  // ============================= Ref ==============================\n  var canRef = !isRenderProps && /*#__PURE__*/React.isValidElement(mergedChildren) && supportRef(mergedChildren);\n  var originRef = canRef ? getNodeRef(mergedChildren) : null;\n  var mergedRef = useComposeRef(originRef, elementRef);\n  var getDom = function getDom() {\n    var _elementRef$current;\n    return findDOMNode(elementRef.current) || (\n    // Support `nativeElement` format\n    elementRef.current && _typeof(elementRef.current) === 'object' ? findDOMNode((_elementRef$current = elementRef.current) === null || _elementRef$current === void 0 ? void 0 : _elementRef$current.nativeElement) : null) || findDOMNode(wrapperRef.current);\n  };\n  React.useImperativeHandle(ref, function () {\n    return getDom();\n  });\n\n  // =========================== Observe ============================\n  var propsRef = React.useRef(props);\n  propsRef.current = props;\n\n  // Handler\n  var onInternalResize = React.useCallback(function (target) {\n    var _propsRef$current = propsRef.current,\n      onResize = _propsRef$current.onResize,\n      data = _propsRef$current.data;\n    var _target$getBoundingCl = target.getBoundingClientRect(),\n      width = _target$getBoundingCl.width,\n      height = _target$getBoundingCl.height;\n    var offsetWidth = target.offsetWidth,\n      offsetHeight = target.offsetHeight;\n\n    /**\n     * Resize observer trigger when content size changed.\n     * In most case we just care about element size,\n     * let's use `boundary` instead of `contentRect` here to avoid shaking.\n     */\n    var fixedWidth = Math.floor(width);\n    var fixedHeight = Math.floor(height);\n    if (sizeRef.current.width !== fixedWidth || sizeRef.current.height !== fixedHeight || sizeRef.current.offsetWidth !== offsetWidth || sizeRef.current.offsetHeight !== offsetHeight) {\n      var size = {\n        width: fixedWidth,\n        height: fixedHeight,\n        offsetWidth: offsetWidth,\n        offsetHeight: offsetHeight\n      };\n      sizeRef.current = size;\n\n      // IE is strange, right?\n      var mergedOffsetWidth = offsetWidth === Math.round(width) ? width : offsetWidth;\n      var mergedOffsetHeight = offsetHeight === Math.round(height) ? height : offsetHeight;\n      var sizeInfo = _objectSpread(_objectSpread({}, size), {}, {\n        offsetWidth: mergedOffsetWidth,\n        offsetHeight: mergedOffsetHeight\n      });\n\n      // Let collection know what happened\n      onCollectionResize === null || onCollectionResize === void 0 || onCollectionResize(sizeInfo, target, data);\n      if (onResize) {\n        // defer the callback but not defer to next frame\n        Promise.resolve().then(function () {\n          onResize(sizeInfo, target);\n        });\n      }\n    }\n  }, []);\n\n  // Dynamic observe\n  React.useEffect(function () {\n    var currentElement = getDom();\n    if (currentElement && !disabled) {\n      observe(currentElement, onInternalResize);\n    }\n    return function () {\n      return unobserve(currentElement, onInternalResize);\n    };\n  }, [elementRef.current, disabled]);\n\n  // ============================ Render ============================\n  return /*#__PURE__*/React.createElement(DomWrapper, {\n    ref: wrapperRef\n  }, canRef ? /*#__PURE__*/React.cloneElement(mergedChildren, {\n    ref: mergedRef\n  }) : mergedChildren);\n}\nvar RefSingleObserver = /*#__PURE__*/React.forwardRef(SingleObserver);\nif (process.env.NODE_ENV !== 'production') {\n  RefSingleObserver.displayName = 'SingleObserver';\n}\nexport default RefSingleObserver;","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport * as React from 'react';\nimport toArray from \"rc-util/es/Children/toArray\";\nimport { warning } from \"rc-util/es/warning\";\nimport SingleObserver from \"./SingleObserver\";\nimport { Collection } from \"./Collection\";\nvar INTERNAL_PREFIX_KEY = 'rc-observer-key';\nimport { _rs } from \"./utils/observerUtil\";\nexport { /** @private Test only for mock trigger resize event */\n_rs };\nfunction ResizeObserver(props, ref) {\n  var children = props.children;\n  var childNodes = typeof children === 'function' ? [children] : toArray(children);\n  if (process.env.NODE_ENV !== 'production') {\n    if (childNodes.length > 1) {\n      warning(false, 'Find more than one child node with `children` in ResizeObserver. Please use ResizeObserver.Collection instead.');\n    } else if (childNodes.length === 0) {\n      warning(false, '`children` of ResizeObserver is empty. Nothing is in observe.');\n    }\n  }\n  return childNodes.map(function (child, index) {\n    var key = (child === null || child === void 0 ? void 0 : child.key) || \"\".concat(INTERNAL_PREFIX_KEY, \"-\").concat(index);\n    return /*#__PURE__*/React.createElement(SingleObserver, _extends({}, props, {\n      key: key,\n      ref: index === 0 ? ref : undefined\n    }), child);\n  });\n}\nvar RefResizeObserver = /*#__PURE__*/React.forwardRef(ResizeObserver);\nif (process.env.NODE_ENV !== 'production') {\n  RefResizeObserver.displayName = 'ResizeObserver';\n}\nRefResizeObserver.Collection = Collection;\nexport default RefResizeObserver;"],"names":["CollectionContext","React.createContext","Collection","_ref","children","onBatchResize","resizeIdRef","React.useRef","resizeInfosRef","onCollectionResize","React.useContext","onResize","React.useCallback","size","element","data","currentId","React.createElement","elementListeners","entities","entity","_elementListeners$get","target","listener","resizeObserver","ResizeObserver","observe","callback","unobserve","DomWrapper","_React$Component","_inherits","_super","_createSuper","_classCallCheck","_createClass","React.Component","SingleObserver","props","ref","disabled","elementRef","wrapperRef","isRenderProps","mergedChildren","sizeRef","canRef","React.isValidElement","supportRef","originRef","getNodeRef","mergedRef","useComposeRef","getDom","_elementRef$current","findDOMNode","_typeof","React.useImperativeHandle","propsRef","onInternalResize","_propsRef$current","_target$getBoundingCl","width","height","offsetWidth","offsetHeight","fixedWidth","fixedHeight","mergedOffsetWidth","mergedOffsetHeight","sizeInfo","_objectSpread","React.useEffect","currentElement","React.cloneElement","RefSingleObserver","React.forwardRef","INTERNAL_PREFIX_KEY","childNodes","toArray","child","index","key","_extends","RefResizeObserver"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4]}